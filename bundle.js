!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.selectedId=void 0,e.convertDateIntoMongoDB=w,e.convertDateFromMongoDB=h,e.showPlaces=D;var o,i=n(2),a=e.selectedId=void 0,r=n(3).serverBase+p()+"/trip-list",c='<li class="js-trip-item">\n      <div class="trip-title">\n        <p><span class="trip-item-name js-trip-item-name"></span></p>\n        <p><span class="trip-item-location js-trip-item-location"></span></p>\n        <p><span class="trip-item-dates js-trip-item-dates"></span></p>\n      </div>\n\n      <div class="trip-controls">\n\n\n        <button title="View comments" class="trip-item-view js-trip-item-view">\n          <img src="img/view.png" />\n        </button>\n\n        <button  title="Add place" class="trip-item-add">\n          <img src="img/add.png" />\n        </button>\n\n        <button  title="Edit" class="trip-item-edit js-trip-item-edit">\n          <img src="img/edit.png" />\n        </button>\n\n        <button  title="Delete" class="trip-item-delete js-trip-item-delete">\n          <img src="img/delete.png" />\n        </button>\n\n      <div>\n     \n    </li>';function p(){var t=window.location.search.split("=");return $.getJSON(r,function(t){0!==t.length?y(t[0].location):($(".popup-overlay-new-trip, .popup-content-new-trip").addClass("active"),$(".box-parent").addClass("inactive"))}),t[1],t[1]}function l(){console.log("Retrieving trip list"),$.getJSON(r,function(t){console.log("Rendering trip list"),console.log(t);var e=t.map(function(t){console.log(t);var e=$(c);e.attr("id",t.id),e.find(".js-trip-item-name").text(t.name),e.find(".js-trip-item-location").text(t.location);var n=e.find(".js-trip-item-dates"),o=h(t.tripDates);return n.text(o),e});$(".js-trip-list").html(e)})}function s(t){$.ajax({method:"POST",url:r,data:JSON.stringify(t),success:function(){l()},dataType:"json",contentType:"application/json"}).then(function(){console.log("Adding trip: "+t),l(),y(t.location),$.getJSON(r,function(t){e.selectedId=a=t[0].id}),$(".popup-overlay-new-trip, .popup-content-new-trip").removeClass("active"),$(".box-parent").removeClass("inactive"),$("#js-new-name").val(""),$("#js-new-location").val(""),$("#js-new-textArea").val(""),$("#js-new-dates").val("")}).then(function(){$(".popup-overlay-view-addPlaceForm, .popup-content-view-addPlaceForm").addClass("active"),$(".box-parent").addClass("inactive"),$(".popup-content-view-addPlaceForm").html('        \n    <h3>Please, add place you have visited </h3>\n    <div class="addPlaceForm-controls">\n  \n    <button class="button js-trip-item-addPlace">\n      Add\n    </button>\n  \n    <button class="button js-trip-item-skipAddTrip">\n       Skip\n    </button>\n  \n  <div>\n')})}function u(){$("#js-trip-item-add").on("click",function(){$(".popup-overlay-new-trip, .popup-content-new-trip").addClass("active"),$(".box-parent").addClass("inactive")}),$("#js-add-trip-form").submit(function(t){t.preventDefault();var e=function(t){return{name:$(t.currentTarget).find("#js-new-name").val(),location:$(t.currentTarget).find("#js-new-location").val(),content:$(t.currentTarget).find("#js-new-textArea").val(),tripDates:$(t.currentTarget).find("#js-new-dates").val()}}(t);e.tripDates=w(e.tripDates),s(e)})}function d(){$("main").on("click",".js-trip-item-delete",function(t){t.preventDefault(),function(t){console.log("Deleting trip `"+t+"`"),$.ajax({url:r+"/"+t,method:"DELETE",success:l})}($(t.currentTarget).closest(".js-trip-item").attr("id"))}),$.getJSON(r,function(t){0!==t.length&&y(t[0].location)})}function v(){$(".popup-content-add-place").html('        \n  <form id="js-add-place-form">\n  <label for="js-add-place-form"><span> <h4>Please add place you have visited in '+o+' </h4> </span></label>\n  <input type="text" name="js-trip-place-name" id="js-place-name" placeholder="Golden Gate Bridge ...." required><br>\n  \n  <button type="submit" class="button" id="addPlace">\n    Add\n  </button>\n  \n  <button class="button js-trip-addPlace-close">\n    Cancel\n  </button>\n\n  </form>\n')}console.log("USERID: ",p());var f=function(t){return function(e){var n=e.data.results[0].geometry.location.lat,o=e.data.results[0].geometry.location.lng,c={name:t,lat:n,lng:o};$.ajax({method:"POST",url:r+"/"+a+"/places",data:JSON.stringify(c),success:function(){l()},dataType:"json",contentType:"application/json"}),(0,i.displayPlaceOnMap)(c),$(".popup-overlay-add-place, .popup-content-add-place").removeClass("active"),$(".popup-overlay-view-oneMorePlace, .popup-content-view-oneMorePlace").addClass("active"),$(".popup-content-view-oneMorePlace").html('        \n    <div id="js-add-oneMorePlace">\n\n    <h2>Add one more place?</h2>\n    \n    <button type="submit" class= "button" id="addOneMorePlace">\n      Yes\n    </button>\n    \n    <button class="button js-trip-addOneMorePlace-cancel">\n      No\n    </button>\n\n    </div>\n    ')}};function m(){$("main").on("click",".js-trip-item-view",function(t){t.preventDefault(),$(".popup-overlay-view-fullTrip, .popup-content-view-fullTrip").addClass("active"),$(".box-parent").addClass("inactive");var e=$(t.currentTarget).closest(".js-trip-item");$.getJSON(r,function(t){!function(t){$(".popup-content-view-fullTrip").html('        \n  <div id="full-trip-view">\n    <p><span class="trip-item js-full-trip-content"></span>'+t.content+'</p>\n  </div>\n  <div class="full-trip-controls">\n  <button class="button js-trip-item-editcontent">\n    Edit\n  </button>\n  <button class="button js-trip-item-close">\n    Cancel\n  </button>\n<div>\n')}(t.find(function(t){return t.id===e.attr("id")}))})})}function g(){$("main").on("click",".js-trip-item-editcontent",function(t){t.preventDefault(),$.getJSON(r,function(t){var e=t.find(function(t){return t.id===a});!function(t){$("#js-upd-content-form").find("#js-upd-textArea").val(t.content),$(".popup-overlay-view-fullTrip, .popup-content-view-fullTrip").removeClass("active"),$(".popup-overlay-view-content, .popup-content-view-content").addClass("active"),$(".box-parent").addClass("inactive")}(e),function(t){$("#js-upd-content-form").on("click","#updatecontent",function(e){e.preventDefault();var n={id:t.id,name:t.name,location:t.location,content:$("#js-upd-content-form").find("textarea").val(),tripDates:t.tripdates};console.log(r+"/"+n.id),console.log("Updating trip item `"+n.id+"`"),console.log(n),a===n.id&&(b(n),$(".popup-overlay-view-content, .popup-content-view-content").removeClass("active"),$(".box-parent").removeClass("inactive"))})}(e)})})}function j(){$("main").on("click",".js-trip-item-edit",function(t){t.preventDefault(),$.getJSON(r,function(t){!function(t){$("#js-upd-trip-form").find("#js-upd-name").val(t.name),$("#js-upd-trip-form").find("#js-upd-location").val(t.location),$("#js-upd-trip-form").find("#js-upd-textArea").val(t.content);var e=h(t.tripDates);$("#js-upd-trip-form").find("#js-upd-dates").val(e),$(".popup-overlay-upd-trip, .popup-content-upd-trip").addClass("active"),$(".box-parent").addClass("inactive")}(t.find(function(t){return t.id===a}))}),function(t){$("#js-upd-trip-form").on("click","#updatetrip",function(e){e.preventDefault();var n={id:t,name:$("#js-upd-trip-form").find('input[name="js-upd-trip-form-name"]').val(),location:$("#js-upd-trip-form").find('input[name="js-upd-trip-form-location"]').val(),tripDates:$("#js-upd-trip-form").find('input[name="js-upd-trip-form-dates"]').val()};console.log(n.content);var o=n.tripDates;n.tripDates=w(o),console.log(r+"/"+n.id),console.log("Updating trip item `"+n.id+"`"),a===n.id&&b(n)})}(a)})}function b(t){$.ajax({url:r+"/"+t.id,method:"PUT",data:JSON.stringify(t),success:function(t){l()},dataType:"json",contentType:"application/json"}).then(function(){$(".popup-overlay-upd-trip, .popup-content-upd-trip").removeClass("active"),$(".box-parent").removeClass("inactive"),$("#js-upd-name").val(""),$("#js-upd-location").val(""),$("#js-upd-textArea").val(""),$("#js-upd-dates").val("")}).then(function(){console.log("Updating trip list: "+t),l();var e=t.tripDates.startDate+"/"+t.tripDates.endDate;t.tripDates=h(e)})}function y(t){axios.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t,key:"AIzaSyDqKYCI1XhXLez68nZki75U4Nizx0Au6v8"}}).then(function(t){(0,i.geocodeAddress)(t)}).catch(function(t){console.log(t)})}function w(t){var e=t.split("-"),n=new Date(e[0]),o=new Date(e[1]),i={startDate:{type:Date,required:!0},endDate:{type:Date,required:!0}};return i.startDate=n,i.endDate=o,i}function h(t){var e=t.split("/"),n=new Date(e[0]),o=new Date(e[1]);return n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear()+" - "+(o.getMonth()+1+"/"+o.getDate()+"/"+o.getFullYear())}function D(t){$.getJSON(r,function(e){for(var n=e.find(function(e){return e.id===t}),o=0;o<n.places.length;o++)(0,i.displayPlaceOnMap)(n.places[o])})}window.saveAndRenderMarker=f,window.initMap=i.initMap,$(function(){l(),d(),function(){var t;$("main").on("click",".trip-title",function(n){n.preventDefault();var i=$(n.currentTarget).closest(".js-trip-item");if(e.selectedId=a=i.attr("id"),D(a),t)t!==r&&(t.find(".trip-controls").removeClass("active"),r=$(n.currentTarget).closest(".js-trip-item"),o=r.find(".js-trip-item-location").text(),r.find(".trip-controls").addClass("active"),y(o),t=r);else{var r=$(n.currentTarget).closest(".js-trip-item");o=r.find(".js-trip-item-location").text(),r.find(".trip-controls").addClass("active"),y(o),t=r}})}(),u(),j(),$("main").on("click",".js-trip-item-addPlace, .trip-item-add",function(t){t.preventDefault(),$(".popup-overlay-view-addPlaceForm, .popup-content-view-addPlaceForm").removeClass("active"),$(".popup-overlay-add-place, .popup-content-add-place").addClass("active"),$(".box-parent").addClass("inactive"),v()}),m(),$("main").on("click",".js-trip-item-close",function(t){t.preventDefault(),$(".popup-overlay-view-fullTrip, .popup-content-view-fullTrip").removeClass("active"),$(".box-parent").removeClass("inactive")}),$("main").on("click",".js-trip-upd-close",function(t){t.preventDefault(),$(".popup-overlay-view-content, .popup-content-view-content").removeClass("active"),$(".popup-overlay-upd-trip, .popup-content-upd-trip").removeClass("active"),$(".box-parent").removeClass("inactive")}),$("main").on("click",".js-trip-addPlace-close",function(t){t.preventDefault(),$(".popup-overlay-add-place, .popup-content-add-place").removeClass("active"),$(".box-parent").removeClass("inactive")}),$("main").on("click","#addPlace",function(t){t.preventDefault();var e=$("#js-add-place-form").find('input[name="js-trip-place-name"]').val();(0,i.getCoordsOfPlace)(e).then(f(e)).catch(function(t){console.log(t)})}),$("main").on("click",".js-trip-item-skipAddTrip",function(t){$(".popup-overlay-view-addPlaceForm, .popup-content-view-addPlaceForm").removeClass("active"),$(".box-parent").removeClass("inactive")}),$("main").on("click","#addOneMorePlace",function(t){t.preventDefault(),$(".popup-overlay-view-oneMorePlace, .popup-content-view-oneMorePlace").removeClass("active"),$(".popup-overlay-add-place, .popup-content-add-place").addClass("active"),$("#js-place-name").val("")}),v(),$("main").on("click",".js-trip-addOneMorePlace-cancel",function(t){t.preventDefault(),$(".popup-overlay-view-oneMorePlace, .popup-content-view-oneMorePlace").removeClass("active"),$(".box-parent").removeClass("inactive")}),g(),$("main").on("click",".canceltrip",function(t){t.preventDefault(),$(".popup-overlay-new-trip, .popup-content-new-trip").removeClass("active"),$(".box-parent").removeClass("inactive")})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initMap=function(){var t;$.getJSON(o,function(e){t=e[0],console.log(t.location)}).then(function(t){console.log(t[0].location),axios.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t[0].location,key:"AIzaSyDqKYCI1XhXLez68nZki75U4Nizx0Au6v8"}}).then(function(t){a(t)}).catch(function(t){console.log(t)})})},e.geocodeAddress=a,e.getCoordsOfPlace=function(t){return axios.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t,key:"AIzaSyDqKYCI1XhXLez68nZki75U4Nizx0Au6v8"}})},e.displayPlaceOnMap=function(t){new google.maps.Marker({position:{lat:Number(t.lat),lng:Number(t.lng)},map:i,icon:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png"})};var o=n(3).serverBase+"trip-list";var i=e.map=void 0;function a(t){console.log(t);var n=t.data.results[0].formatted_address,o=t.data.results[0].geometry.location.lat,a=t.data.results[0].geometry.location.lng;console.log(o),console.log(a),console.log(n),e.map=i=new google.maps.Map(document.getElementById("map"),{center:{lat:Number(o),lng:Number(a)},zoom:12})}},function(t,e,n){"use strict";(function(t){e.DATABASE_URL=t.env.DATABASE_URL||"mongodb://tripuser:Paswword1@ds251112.mlab.com:51112/trips",e.TEST_DATABASE_URL=t.env.TEST_DATABASE_URL||"mongodb://localhost/test-trip",e.PORT=t.env.PORT||8080,e.serverBase="https://mighty-wildwood-62473.herokuapp.com/"}).call(this,n(4))},function(t,e){var n,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{o="function"==typeof clearTimeout?clearTimeout:r}catch(t){o=r}}();var p,l=[],s=!1,u=-1;function d(){s&&p&&(s=!1,p.length?l=p.concat(l):u=-1,l.length&&v())}function v(){if(!s){var t=c(d);s=!0;for(var e=l.length;e;){for(p=l,l=[];++u<e;)p&&p[u].run();u=-1,e=l.length}p=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||s||c(v)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vY2xpZW50L2luZGV4LmpzIiwid2VicGFjazovLy8uL2NsaWVudC9nb29nbGUuanMiLCJ3ZWJwYWNrOi8vLy4vY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb252ZXJ0RGF0ZUludG9Nb25nb0RCIiwiY29udmVydERhdGVGcm9tTW9uZ29EQiIsInNob3dQbGFjZXMiLCJsb2NhdGlvbiIsIl9nb29nbGUiLCJzZWxlY3RlZElkIiwiVFJJUF9MSVNUX1VSTCIsInNlcnZlckJhc2UiLCJnZXRVc2VySWQiLCJ0cmlwSXRlbVRlbXBsYXRlIiwiYXJyYXkiLCJ3aW5kb3ciLCJzZWFyY2giLCJzcGxpdCIsIiQiLCJnZXRKU09OIiwiaXRlbXMiLCJsZW5ndGgiLCJyZW5kZXJTZWxlY3RlZE1hcCIsImFkZENsYXNzIiwiZ2V0QW5kRGlzcGxheVRyaXBMaXN0IiwiY29uc29sZSIsImxvZyIsIml0ZW1FbGVtZW50cyIsIm1hcCIsIml0ZW0iLCJlbGVtZW50IiwiYXR0ciIsImlkIiwiZmluZCIsInRleHQiLCJpdGVtVHJpcERhdGVzIiwiY29udmVydGVkSXRlbVRyaXBEYXRlcyIsInRyaXBEYXRlcyIsImh0bWwiLCJhZGRUcmlwSXRlbSIsImFqYXgiLCJtZXRob2QiLCJ1cmwiLCJkYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInN1Y2Nlc3MiLCJkYXRhVHlwZSIsImNvbnRlbnRUeXBlIiwidGhlbiIsInJlbW92ZUNsYXNzIiwidmFsIiwiaGFuZGxlVHJpcExpc3RBZGQiLCJvbiIsInN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImN1cnJlbnRUYXJnZXQiLCJjb250ZW50IiwiZ2V0VHJpcEZvcm1EZXRhaWxzIiwiaGFuZGxlVHJpcERlbGV0ZSIsInRyaXBJZCIsImRlbGV0ZXRyaXAiLCJjbG9zZXN0IiwiYWRkUGxhY2VGb3JtIiwic2F2ZUFuZFJlbmRlck1hcmtlciIsInBsYWNlIiwicmVzcG9uc2UiLCJsYXQiLCJyZXN1bHRzIiwiZ2VvbWV0cnkiLCJsbmciLCJpdGVtUGxhY2UiLCJkaXNwbGF5UGxhY2VPbk1hcCIsImhhZGxlVmlld1RyaXAiLCJ1cGRhdGVWaWV3RnVsbFRyaXAiLCJoYW5kbGVDb250ZW50RWRpdCIsImdldENvbnRlbnRGb3JtV2l0aERldGFpbHMiLCJuZXdJdGVtIiwidHJpcGRhdGVzIiwicnVuQWpheCIsInNhdmVVcGRhdGVkQ29udGVudCIsImhhbmRsZVRyaXBFZGl0IiwiY29udmVydGVkVHJpcERhdGVzIiwiZ2V0VHJpcEZvcm1XaXRoRGV0YWlscyIsIm1vbmdvRm9ybWF0RGF0ZSIsInNhdmVVcGRhdGVkVHJpcCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJheGlvcyIsInBhcmFtcyIsImFkZHJlc3MiLCJnZW9jb2RlQWRkcmVzcyIsImNhdGNoIiwiZXJyb3IiLCJEYXRlIiwidHlwZSIsInJlcXVpcmVkIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJwbGFjZXMiLCJpbml0TWFwIiwicHJldkVsZW1lbnQiLCJjdXJyZW50RWxlbWVudCIsImhhbmRsZVNlbGVjdFRyaXAiLCJnZXRDb29yZHNPZlBsYWNlIiwibGFzdEl0ZW0iLCJnb29nbGUiLCJtYXBzIiwiTWFya2VyIiwicG9zaXRpb24iLCJOdW1iZXIiLCJpY29uIiwiZm9ybWF0dGVkQWRkcmVzcyIsImZvcm1hdHRlZF9hZGRyZXNzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNlbnRlciIsInpvb20iLCJEQVRBQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiVEVTVF9EQVRBQkFTRV9VUkwiLCJQT1JUIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwic2V0VGltZW91dCIsInRoaXMiLCJjbGVhclRpbWVvdXQiLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImNvbmNhdCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsIm5vb3AiLCJuZXh0VGljayIsImFyZ3MiLCJBcnJheSIsImFyZ3VtZW50cyIsInB1c2giLCJhcHBseSIsInRpdGxlIiwiYnJvd3NlciIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFBQSxHQUFnSCxPQUFBTixFQUFBTSxJQUFxQkMsS0FBQSxLQUFBRCxJQUNySSxPQUFBRixHQUlBekIsRUFBQTZCLEVBQUEsU0FBQTFCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQXFCLFdBQ0EsV0FBMkIsT0FBQXJCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQvQixFQUFBa0MsRUFBQSxJQUlBbEMsSUFBQW1DLEVBQUEseUlDcWRnQkMsMkJBbUJBQywyQkFZQUMsYUF0a0JoQixJQVVJQyxFQVZKQyxFQUFBeEMsRUFBQSxHQVNXeUMsc0JBS1BDLEVBRG1CMUMsRUFBUSxHQUF2QjJDLFdBQ3lCQyxJQUFjLGFBRzNDQyxvNEJBb0NKLFNBQVNELElBQ1AsSUFDSUUsRUFEYUMsT0FBT1IsU0FDSFMsT0FBT0MsTUFBTSxLQVdsQyxPQVZBQyxFQUFFQyxRQUFRVCxFQUFlLFNBQVVVLEdBQ2YsSUFBZkEsRUFBTUMsT0FDUEMsRUFBa0JGLEVBQU0sR0FBR2IsV0FFM0JXLEVBQUUsb0RBQW9ESyxTQUFTLFVBQy9ETCxFQUFFLGVBQWVLLFNBQVMsZUFJckJULEVBQU0sR0FDUkEsRUFBTSxHQU1mLFNBQVNVLElBQ1BDLFFBQVFDLElBQUksd0JBQ1pSLEVBQUVDLFFBQVFULEVBQWUsU0FBVVUsR0FDakNLLFFBQVFDLElBQUksdUJBQ1pELFFBQVFDLElBQUlOLEdBQ1osSUFBSU8sRUFBZVAsRUFBTVEsSUFBSSxTQUFVQyxHQUVyQ0osUUFBUUMsSUFBSUcsR0FFWixJQUFJQyxFQUFVWixFQUFFTCxHQUNoQmlCLEVBQVFDLEtBQUssS0FBTUYsRUFBS0csSUFFVEYsRUFBUUcsS0FBSyxzQkFDbkJDLEtBQUtMLEVBQUtsRCxNQUVBbUQsRUFBUUcsS0FBSywwQkFDbkJDLEtBQUtMLEVBQUt0QixVQUV2QixJQUFJNEIsRUFBZ0JMLEVBQVFHLEtBQUssdUJBQzdCRyxFQUF5Qi9CLEVBQXVCd0IsRUFBS1EsV0FFekQsT0FEQUYsRUFBY0QsS0FBS0UsR0FDWk4sSUFHVFosRUFBRSxpQkFBaUJvQixLQUFLWCxLQXVCNUIsU0FBU1ksRUFBWVYsR0FDbkJYLEVBQUVzQixNQUNBQyxPQUFRLE9BQ1JDLElBQUtoQyxFQUNMaUMsS0FBTUMsS0FBS0MsVUFBVWhCLEdBQ3JCaUIsUUFBUyxXQUNQdEIsS0FFRnVCLFNBQVUsT0FDVkMsWUFBYSxxQkFDWkMsS0FBSyxXQUNOeEIsUUFBUUMsSUFBSSxnQkFBa0JHLEdBQzlCTCxJQUNBRixFQUFrQk8sRUFBS3RCLFVBRXZCVyxFQUFFQyxRQUFRVCxFQUFlLFNBQVVVLEdBQ2pDbEQsRUE5SEt1QyxXQThITEEsRUFBYVcsRUFBTSxHQUFHWSxLQUV4QmQsRUFBRSxvREFBb0RnQyxZQUFZLFVBQ2xFaEMsRUFBRSxlQUFlZ0MsWUFBWSxZQUU3QmhDLEVBQUUsZ0JBQWdCaUMsSUFBSSxJQUN0QmpDLEVBQUUsb0JBQW9CaUMsSUFBSSxJQUMxQmpDLEVBQUUsb0JBQW9CaUMsSUFBSSxJQUMxQmpDLEVBQUUsaUJBQWlCaUMsSUFBSSxNQUN0QkYsS0FBSyxXQUNOL0IsRUFBRSxzRUFBc0VLLFNBQVMsVUFDakZMLEVBQUUsZUFBZUssU0FBUyxZQXlCNUJMLEVBQUUsb0NBQW9Db0IsS0FBdEMsK1JBbkJGLFNBQVNjLElBdkNQbEMsRUFBRSxxQkFBcUJtQyxHQUFHLFFBQVMsV0FDakNuQyxFQUFFLG9EQUFvREssU0FBUyxVQUMvREwsRUFBRSxlQUFlSyxTQUFTLGNBdUM1QkwsRUFBRSxxQkFBcUJvQyxPQUFPLFNBQVVDLEdBQ3RDQSxFQUFFQyxpQkFDRixJQUFNM0IsRUFNVixTQUE0QjBCLEdBQzFCLE9BQ0U1RSxLQUFNdUMsRUFBRXFDLEVBQUVFLGVBQWV4QixLQUFLLGdCQUFnQmtCLE1BQzlDNUMsU0FBVVcsRUFBRXFDLEVBQUVFLGVBQWV4QixLQUFLLG9CQUFvQmtCLE1BQ3RETyxRQUFTeEMsRUFBRXFDLEVBQUVFLGVBQWV4QixLQUFLLG9CQUFvQmtCLE1BQ3JEZCxVQUFXbkIsRUFBRXFDLEVBQUVFLGVBQWV4QixLQUFLLGlCQUFpQmtCLE9BWHZDUSxDQUFtQkosR0FDaEMxQixFQUFLUSxVQUFZakMsRUFBdUJ5QixFQUFLUSxXQUM3Q0UsRUFBWVYsS0ErQ2hCLFNBQVMrQixJQUNQMUMsRUFBRSxRQUFRbUMsR0FBRyxRQUFTLHVCQUF3QixTQUFVRSxHQUN0REEsRUFBRUMsaUJBWk4sU0FBb0JLLEdBQ2xCcEMsUUFBUUMsSUFBSSxrQkFBb0JtQyxFQUFTLEtBQ3pDM0MsRUFBRXNCLE1BQ0FFLElBQUtoQyxFQUFnQixJQUFNbUQsRUFDM0JwQixPQUFRLFNBQ1JLLFFBQVN0QixJQVFUc0MsQ0FDRTVDLEVBQUVxQyxFQUFFRSxlQUFlTSxRQUFRLGlCQUFpQmhDLEtBQUssU0FJckRiLEVBQUVDLFFBQVFULEVBQWUsU0FBVVUsR0FDZixJQUFmQSxFQUFNQyxRQUNQQyxFQUFrQkYsRUFBTSxHQUFHYixZQWtCakMsU0FBU3lELElBQ1A5QyxFQUFFLDRCQUE0Qm9CLEtBQTlCLCtIQUVpRi9CLEVBRmpGLGdVQXRLRmtCLFFBQVFDLElBQUksV0FBWWQsS0ErTHhCLElBQU1xRCxFQUFzQixTQUFVQyxHQUNwQyxPQUFPLFNBQVVDLEdBQ2YsSUFBTUMsRUFBTUQsRUFBU3hCLEtBQUswQixRQUFRLEdBQUdDLFNBQVMvRCxTQUFTNkQsSUFDakRHLEVBQU1KLEVBQVN4QixLQUFLMEIsUUFBUSxHQUFHQyxTQUFTL0QsU0FBU2dFLElBRWpEQyxHQUNKN0YsS0FBTXVGLEVBQ05FLElBQUtBLEVBQ0xHLElBQUtBLEdBR1ByRCxFQUFFc0IsTUFDQUMsT0FBUSxPQUNSQyxJQUFLaEMsTUFBa0JELEVBQWxCLFVBQ0xrQyxLQUFNQyxLQUFLQyxVQUFVMkIsR0FDckIxQixRQUFTLFdBQ1B0QixLQUVGdUIsU0FBVSxPQUNWQyxZQUFhLHNCQUdmLEVBQUF4QyxFQUFBaUUsbUJBQWtCRCxHQUNsQnRELEVBQUUsc0RBQXNEZ0MsWUFBWSxVQUNwRWhDLEVBQUUsc0VBQXNFSyxTQUFTLFVBQ2pGTCxFQUFFLG9DQUFvQ29CLEtBQXRDLHNTQXFESixTQUFTb0MsSUFDUHhELEVBQUUsUUFBUW1DLEdBQUcsUUFBUyxxQkFBc0IsU0FBVUUsR0FDcERBLEVBQUVDLGlCQUNGdEMsRUFBRSw4REFBOERLLFNBQVMsVUFDekVMLEVBQUUsZUFBZUssU0FBUyxZQUUxQixJQUFJTyxFQUFVWixFQUFFcUMsRUFBRUUsZUFBZU0sUUFBUSxpQkFFekM3QyxFQUFFQyxRQUFRVCxFQUFlLFNBQVVVLElBUXZDLFNBQTRCUyxHQUMxQlgsRUFBRSxnQ0FBZ0NvQixLQUFsQyxxR0FFMkRULEVBQUs2QixRQUZoRSxpTkFQSWlCLENBRE92RCxFQUFNYSxLQUFLLFNBQUFKLEdBQUEsT0FBUUEsRUFBS0csS0FBT0YsRUFBUUMsS0FBSyxhQXVCekQsU0FBUzZDLElBQ1AxRCxFQUFFLFFBQVFtQyxHQUFHLFFBQVMsNEJBQTZCLFNBQVVFLEdBQzNEQSxFQUFFQyxpQkFFRnRDLEVBQUVDLFFBQVFULEVBQWUsU0FBVVUsR0FDakMsSUFBSVMsRUFBT1QsRUFBTWEsS0FBSyxTQUFBSixHQUFBLE9BQVFBLEVBQUtHLEtBQU92QixLQXNDaEQsU0FBbUNvQixHQUNqQ1gsRUFBRSx3QkFBd0JlLEtBQUssb0JBQW9Ca0IsSUFBSXRCLEVBQUs2QixTQUM1RHhDLEVBQUUsOERBQThEZ0MsWUFBWSxVQUU1RWhDLEVBQUUsNERBQTRESyxTQUFTLFVBQ3ZFTCxFQUFFLGVBQWVLLFNBQVMsWUExQ3RCc0QsQ0FBMEJoRCxHQThDaEMsU0FBNEJBLEdBRTFCWCxFQUFFLHdCQUF3Qm1DLEdBQUcsUUFBUyxpQkFBa0IsU0FBVUUsR0FDaEVBLEVBQUVDLGlCQUVGLElBQUlzQixHQUNGOUMsR0FBSUgsRUFBS0csR0FDVHJELEtBQU1rRCxFQUFLbEQsS0FDWDRCLFNBQVVzQixFQUFLdEIsU0FDZm1ELFFBQVN4QyxFQUFFLHdCQUF3QmUsS0FBSyxZQUFZa0IsTUFDcERkLFVBQVdSLEVBQUtrRCxXQUVsQnRELFFBQVFDLElBQUloQixFQUFnQixJQUFNb0UsRUFBUTlDLElBRTFDUCxRQUFRQyxJQUFJLHVCQUF5Qm9ELEVBQVE5QyxHQUFLLEtBQ2xEUCxRQUFRQyxJQUFJb0QsR0FFUnJFLElBQWVxRSxFQUFROUMsS0FDekJnRCxFQUFRRixHQUNSNUQsRUFBRSw0REFBNERnQyxZQUFZLFVBQzFFaEMsRUFBRSxlQUFlZ0MsWUFBWSxlQWpFN0IrQixDQUFtQnBELE9BY3pCLFNBQVNxRCxJQUNQaEUsRUFBRSxRQUFRbUMsR0FBRyxRQUFTLHFCQUFzQixTQUFVRSxHQUNwREEsRUFBRUMsaUJBQ0Z0QyxFQUFFQyxRQUFRVCxFQUFlLFNBQVVVLElBUXZDLFNBQWdDUyxHQUM5QlgsRUFBRSxxQkFBcUJlLEtBQUssZ0JBQWdCa0IsSUFBSXRCLEVBQUtsRCxNQUNyRHVDLEVBQUUscUJBQXFCZSxLQUFLLG9CQUFvQmtCLElBQUl0QixFQUFLdEIsVUFDekRXLEVBQUUscUJBQXFCZSxLQUFLLG9CQUFvQmtCLElBQUl0QixFQUFLNkIsU0FDekQsSUFBSXlCLEVBQXFCOUUsRUFBdUJ3QixFQUFLUSxXQUNyRG5CLEVBQUUscUJBQXFCZSxLQUFLLGlCQUFpQmtCLElBQUlnQyxHQUVqRGpFLEVBQUUsb0RBQW9ESyxTQUFTLFVBQy9ETCxFQUFFLGVBQWVLLFNBQVMsWUFkdEI2RCxDQURXaEUsRUFBTWEsS0FBSyxTQUFBSixHQUFBLE9BQVFBLEVBQUtHLEtBQU92QixPQXFEaEQsU0FBeUJvRCxHQUN2QjNDLEVBQUUscUJBQXFCbUMsR0FBRyxRQUFTLGNBQWUsU0FBVUUsR0FDMURBLEVBQUVDLGlCQUNGLElBQUkzQixHQUNGRyxHQUFJNkIsRUFDSmxGLEtBQU11QyxFQUFFLHFCQUFxQmUsS0FBSyx1Q0FBdUNrQixNQUN6RTVDLFNBQVVXLEVBQUUscUJBQXFCZSxLQUFLLDJDQUEyQ2tCLE1BQ2pGZCxVQUFXbkIsRUFBRSxxQkFBcUJlLEtBQUssd0NBQXdDa0IsT0FFakYxQixRQUFRQyxJQUFJRyxFQUFLNkIsU0FDakIsSUFBSTJCLEVBQWtCeEQsRUFBS1EsVUFDM0JSLEVBQUtRLFVBQVlqQyxFQUF1QmlGLEdBQ3hDNUQsUUFBUUMsSUFBSWhCLEVBQWdCLElBQU1tQixFQUFLRyxJQUN2Q1AsUUFBUUMsSUFBSSx1QkFBeUJHLEVBQUtHLEdBQUssS0FDM0N2QixJQUFlb0IsRUFBS0csSUFDdEJnRCxFQUFRbkQsS0FqRVZ5RCxDQUFnQjdFLEtBc0VwQixTQUFTdUUsRUFBUW5ELEdBQ2ZYLEVBQUVzQixNQUNFRSxJQUFLaEMsRUFBZ0IsSUFBTW1CLEVBQUtHLEdBQ2hDUyxPQUFRLE1BQ1JFLEtBQU1DLEtBQUtDLFVBQVVoQixHQUNyQmlCLFFBQVMsU0FBVUgsR0FDakJuQixLQUVGdUIsU0FBVSxPQUNWQyxZQUFhLHFCQUVkQyxLQUFLLFdBQ0ovQixFQUFFLG9EQUFvRGdDLFlBQVksVUFDbEVoQyxFQUFFLGVBQWVnQyxZQUFZLFlBQzdCaEMsRUFBRSxnQkFBZ0JpQyxJQUFJLElBQ3RCakMsRUFBRSxvQkFBb0JpQyxJQUFJLElBQzFCakMsRUFBRSxvQkFBb0JpQyxJQUFJLElBQzFCakMsRUFBRSxpQkFBaUJpQyxJQUFJLE1BRXhCRixLQUFLLFdBQ0p4QixRQUFRQyxJQUFJLHVCQUF5QkcsR0FDckNMLElBQ0EsSUFBSTZELEVBQXFCeEQsRUFBS1EsVUFBVWtELFVBQXBDLElBQWlEMUQsRUFBS1EsVUFBVW1ELFFBQ3BFM0QsRUFBS1EsVUFBWWhDLEVBQXVCZ0YsS0F3QzlDLFNBQVMvRCxFQUFrQmYsR0FDekJrRixNQUFNeEcsSUFBSSxxREFDRnlHLFFBQ0VDLFFBQVNwRixFQUNUWixJQUFLLDZDQUdSc0QsS0FDQyxTQUFVa0IsSUFDUixFQUFBM0QsRUFBQW9GLGdCQUFlekIsS0FHbEIwQixNQUFNLFNBQVVDLEdBQ2ZyRSxRQUFRQyxJQUFJb0UsS0FRZixTQUFTMUYsRUFBdUJpRixHQUNyQyxJQUFJdkUsRUFBUXVFLEVBQWdCcEUsTUFBTSxLQUM5QnNFLEVBQVksSUFBSVEsS0FBS2pGLEVBQU0sSUFDM0IwRSxFQUFVLElBQUlPLEtBQUtqRixFQUFNLElBQ3pCdUIsR0FDRmtELFdBQ0VTLEtBQU1ELEtBQ05FLFVBQVUsR0FFWlQsU0FDRVEsS0FBTUQsS0FDTkUsVUFBVSxJQUtkLE9BRkE1RCxFQUFVa0QsVUFBWUEsRUFDdEJsRCxFQUFVbUQsUUFBVUEsRUFDYm5ELEVBR0YsU0FBU2hDLEVBQXVCZ0YsR0FDckMsSUFBSXZFLEVBQVF1RSxFQUFnQnBFLE1BQU0sS0FDOUJzRSxFQUFZLElBQUlRLEtBQUtqRixFQUFNLElBQzNCMEUsRUFBVSxJQUFJTyxLQUFLakYsRUFBTSxJQUk3QixPQUg0QnlFLEVBQVVXLFdBQVcsRUFBN0MsSUFBa0RYLEVBQVVZLFVBQTVELElBQXlFWixFQUFVYSxjQUVuRixPQURzQlosRUFBUVUsV0FBVyxFQUF6QyxJQUE4Q1YsRUFBUVcsVUFBdEQsSUFBbUVYLEVBQVFZLGVBTzFFLFNBQVM5RixFQUFXRyxHQUN6QlMsRUFBRUMsUUFBUVQsRUFBZSxTQUFVVSxHQUUvQixJQURGLElBQUlTLEVBQU9ULEVBQU1hLEtBQUssU0FBQUosR0FBQSxPQUFRQSxFQUFLRyxLQUFPdkIsSUFDaENyQyxFQUFFLEVBQUdBLEVBQUV5RCxFQUFLd0UsT0FBT2hGLE9BQVFqRCxLQUNqQyxFQUFBb0MsRUFBQWlFLG1CQUFrQjVDLEVBQUt3RSxPQUFPakksTUF6UXRDMkMsT0FBT2tELG9CQUFzQkEsRUErUTdCbEQsT0FBT3VGLFFBQVVBLFVBRWpCcEYsRUFBRSxXQUNBTSxJQUNBb0MsSUEzRkYsV0FDRSxJQUFJMkMsRUFDSnJGLEVBQUUsUUFBUW1DLEdBQUcsUUFBUyxjQUFlLFNBQVVFLEdBQzdDQSxFQUFFQyxpQkFDRixJQUFJMUIsRUFBVVosRUFBRXFDLEVBQUVFLGVBQWVNLFFBQVEsaUJBR3pDLEdBRkE3RixFQXJmT3VDLFdBcWZQQSxFQUFhcUIsRUFBUUMsS0FBSyxNQUMxQnpCLEVBQVdHLEdBQ044RixFQU1NQSxJQUFnQkMsSUFDekJELEVBQVl0RSxLQUFLLGtCQUFrQmlCLFlBQVksVUFDM0NzRCxFQUFpQnRGLEVBQUVxQyxFQUFFRSxlQUFlTSxRQUFRLGlCQUNoRHhELEVBQVdpRyxFQUFldkUsS0FBSywwQkFBMEJDLE9BQ3pEc0UsRUFBZXZFLEtBQUssa0JBQWtCVixTQUFTLFVBRS9DRCxFQUFrQmYsR0FDbEJnRyxFQUFjQyxPQWJFLENBQ2hCLElBQUlBLEVBQWlCdEYsRUFBRXFDLEVBQUVFLGVBQWVNLFFBQVEsaUJBQ2hEeEQsRUFBV2lHLEVBQWV2RSxLQUFLLDBCQUEwQkMsT0FDekRzRSxFQUFldkUsS0FBSyxrQkFBa0JWLFNBQVMsVUFDL0NELEVBQWtCZixHQUNsQmdHLEVBQWNDLEtBZ0ZsQkMsR0FDQXJELElBQ0E4QixJQXhYQWhFLEVBQUUsUUFBUW1DLEdBQUcsUUFBUyx5Q0FBMEMsU0FBVUUsR0FDeEVBLEVBQUVDLGlCQUNGdEMsRUFBRSxzRUFBc0VnQyxZQUFZLFVBQ3BGaEMsRUFBRSxzREFBc0RLLFNBQVMsVUFDakVMLEVBQUUsZUFBZUssU0FBUyxZQUMxQnlDLE1BcVhGVSxJQTVOQXhELEVBQUUsUUFBUW1DLEdBQUcsUUFBUyxzQkFBdUIsU0FBVUUsR0FDckRBLEVBQUVDLGlCQUNGdEMsRUFBRSw4REFBOERnQyxZQUFZLFVBQzVFaEMsRUFBRSxlQUFlZ0MsWUFBWSxjQStHL0JoQyxFQUFFLFFBQVFtQyxHQUFHLFFBQVMscUJBQXNCLFNBQVVFLEdBQ3BEQSxFQUFFQyxpQkFDRnRDLEVBQUUsNERBQTREZ0MsWUFBWSxVQUMxRWhDLEVBQUUsb0RBQW9EZ0MsWUFBWSxVQUNsRWhDLEVBQUUsZUFBZWdDLFlBQVksY0F2UC9CaEMsRUFBRSxRQUFRbUMsR0FBRyxRQUFTLDBCQUEyQixTQUFVRSxHQUN6REEsRUFBRUMsaUJBQ0Z0QyxFQUFFLHNEQUFzRGdDLFlBQVksVUFDcEVoQyxFQUFFLGVBQWVnQyxZQUFZLGNBb0UvQmhDLEVBQUUsUUFBUW1DLEdBQUcsUUFBUyxZQUFhLFNBQVVFLEdBQzNDQSxFQUFFQyxpQkFDRixJQUFJVSxFQUFRaEQsRUFBRSxzQkFBc0JlLEtBQUssb0NBQW9Da0IsT0FFN0UsRUFBQTNDLEVBQUFrRyxrQkFBaUJ4QyxHQUNkakIsS0FBS2dCLEVBQW9CQyxJQUN6QjJCLE1BQU0sU0FBVUMsR0FDZHJFLFFBQVFDLElBQUlvRSxPQS9JbkI1RSxFQUFFLFFBQVFtQyxHQUFHLFFBQVMsNEJBQTZCLFNBQVVFLEdBQzNEckMsRUFBRSxzRUFBc0VnQyxZQUFZLFVBQ3BGaEMsRUFBRSxlQUFlZ0MsWUFBWSxjQWtIL0JoQyxFQUFFLFFBQVFtQyxHQUFHLFFBQVMsbUJBQW9CLFNBQVVFLEdBQ2xEQSxFQUFFQyxpQkFDRnRDLEVBQUUsc0VBQXNFZ0MsWUFBWSxVQUNwRmhDLEVBQUUsc0RBQXNESyxTQUFTLFVBQ2pFTCxFQUFFLGtCQUFrQmlDLElBQUksTUFHMUJhLElBSUE5QyxFQUFFLFFBQVFtQyxHQUFHLFFBQVMsa0NBQW1DLFNBQVVFLEdBQ2pFQSxFQUFFQyxpQkFDRnRDLEVBQUUsc0VBQXNFZ0MsWUFBWSxVQUNwRmhDLEVBQUUsZUFBZWdDLFlBQVksY0FvUy9CMEIsSUF4ZkExRCxFQUFFLFFBQVFtQyxHQUFHLFFBQVMsY0FBZSxTQUFVRSxHQUM3Q0EsRUFBRUMsaUJBQ0Z0QyxFQUFFLG9EQUFvRGdDLFlBQVksVUFDbEVoQyxFQUFFLGVBQWVnQyxZQUFZLGlHQ3ZHakJvRCxRQUFULFdBQ0wsSUFBSUssRUFDSnpGLEVBQUVDLFFBQVFULEVBQWUsU0FBVVUsR0FFakN1RixFQUFXdkYsRUFBTSxHQUNqQkssUUFBUUMsSUFBSWlGLEVBQVNwRyxZQUNwQjBDLEtBQUssU0FBQzBELEdBQ1BsRixRQUFRQyxJQUFJaUYsRUFBUyxHQUFHcEcsVUFDeEJrRixNQUFNeEcsSUFBSSxxREFDTnlHLFFBQ0VDLFFBQVNnQixFQUFTLEdBQUdwRyxTQUNyQlosSUFBSyw2Q0FHUnNELEtBQ0MsU0FBVWtCLEdBQ1J5QixFQUFlekIsS0FFbEIwQixNQUFNLFNBQVVDLEdBQ2ZyRSxRQUFRQyxJQUFJb0UsVUFRSkYsbUJBd0JBYyxpQkFBVCxTQUEwQnhDLEdBQy9CLE9BQU91QixNQUFNeEcsSUFBSSxxREFDZnlHLFFBQ0VDLFFBQVN6QixFQUNUdkUsSUFBSyxnREFLSzhFLGtCQUFULFNBQTJCRCxHQUVuQixJQUFJb0MsT0FBT0MsS0FBS0MsUUFDM0JDLFVBQ0UzQyxJQUFLNEMsT0FBT3hDLEVBQVVKLEtBQ3RCRyxJQUFLeUMsT0FBT3hDLEVBQVVELE1BRXhCM0MsSUFBS0EsRUFDTHFGLEtBQU0sd0dBdEVOdkcsRUFEbUIxQyxFQUFRLEdBQXZCMkMsV0FDeUIsWUE0QjFCLElBQUlpQixlQUNKLFNBQVNnRSxFQUFlekIsR0FHN0IxQyxRQUFRQyxJQUFJeUMsR0FHWixJQUFJK0MsRUFBbUIvQyxFQUFTeEIsS0FBSzBCLFFBQVEsR0FBRzhDLGtCQUc1Qy9DLEVBQU1ELEVBQVN4QixLQUFLMEIsUUFBUSxHQUFHQyxTQUFTL0QsU0FBUzZELElBQ2pERyxFQUFNSixFQUFTeEIsS0FBSzBCLFFBQVEsR0FBR0MsU0FBUy9ELFNBQVNnRSxJQUVyRDlDLFFBQVFDLElBQUkwQyxHQUNaM0MsUUFBUUMsSUFBSTZDLEdBQ1o5QyxRQUFRQyxJQUFJd0YsR0FDWmhKLEVBaEJTMEQsSUFnQlRBLEVBQU0sSUFBSWdGLE9BQU9DLEtBQUtPLElBQUlDLFNBQVNDLGVBQWUsUUFDaERDLFFBQ0VuRCxJQUFLNEMsT0FBTzVDLEdBQ1pHLElBQUt5QyxPQUFPekMsSUFFZGlELEtBQU0saURDbkRWdEosRUFBUXVKLGFBQ05DLEVBQVFDLElBQUlGLGNBQWdCLDZEQUM5QnZKLEVBQVEwSixrQkFDTkYsRUFBUUMsSUFBSUMsbUJBQXFCLGdDQUNuQzFKLEVBQVEySixLQUFPSCxFQUFRQyxJQUFJRSxNQUFRLEtBRW5DM0osRUFBUXlDLFdBQWEsZ0ZDTnJCLElBT0FtSCxFQUNBQyxFQVJBTCxFQUFBdkosRUFBQUQsV0FVQSxTQUFBOEosSUFDQSxVQUFBQyxNQUFBLG1DQUVBLFNBQUFDLElBQ0EsVUFBQUQsTUFBQSxxQ0FzQkEsU0FBQUUsRUFBQUMsR0FDQSxHQUFBTixJQUFBTyxXQUVBLE9BQUFBLFdBQUFELEVBQUEsR0FHQSxJQUFBTixJQUFBRSxJQUFBRixJQUFBTyxXQUVBLE9BREFQLEVBQUFPLFdBQ0FBLFdBQUFELEVBQUEsR0FFQSxJQUVBLE9BQUFOLEVBQUFNLEVBQUEsR0FDSyxNQUFBN0UsR0FDTCxJQUVBLE9BQUF1RSxFQUFBdkosS0FBQSxLQUFBNkosRUFBQSxHQUNTLE1BQUE3RSxHQUVULE9BQUF1RSxFQUFBdkosS0FBQStKLEtBQUFGLEVBQUEsTUF2Q0EsV0FDQSxJQUVBTixFQURBLG1CQUFBTyxXQUNBQSxXQUVBTCxFQUVLLE1BQUF6RSxHQUNMdUUsRUFBQUUsRUFFQSxJQUVBRCxFQURBLG1CQUFBUSxhQUNBQSxhQUVBTCxFQUVLLE1BQUEzRSxHQUNMd0UsRUFBQUcsR0FqQkEsR0F3RUEsSUFFQU0sRUFGQUMsS0FDQUMsR0FBQSxFQUVBQyxHQUFBLEVBRUEsU0FBQUMsSUFDQUYsR0FBQUYsSUFHQUUsR0FBQSxFQUNBRixFQUFBbkgsT0FDQW9ILEVBQUFELEVBQUFLLE9BQUFKLEdBRUFFLEdBQUEsRUFFQUYsRUFBQXBILFFBQ0F5SCxLQUlBLFNBQUFBLElBQ0EsSUFBQUosRUFBQSxDQUdBLElBQUFLLEVBQUFaLEVBQUFTLEdBQ0FGLEdBQUEsRUFHQSxJQURBLElBQUFNLEVBQUFQLEVBQUFwSCxPQUNBMkgsR0FBQSxDQUdBLElBRkFSLEVBQUFDLEVBQ0FBLE9BQ0FFLEVBQUFLLEdBQ0FSLEdBQ0FBLEVBQUFHLEdBQUFNLE1BR0FOLEdBQUEsRUFDQUssRUFBQVAsRUFBQXBILE9BRUFtSCxFQUFBLEtBQ0FFLEdBQUEsRUFuRUEsU0FBQVEsR0FDQSxHQUFBbkIsSUFBQVEsYUFFQSxPQUFBQSxhQUFBVyxHQUdBLElBQUFuQixJQUFBRyxJQUFBSCxJQUFBUSxhQUVBLE9BREFSLEVBQUFRLGFBQ0FBLGFBQUFXLEdBRUEsSUFFQW5CLEVBQUFtQixHQUNLLE1BQUEzRixHQUNMLElBRUEsT0FBQXdFLEVBQUF4SixLQUFBLEtBQUEySyxHQUNTLE1BQUEzRixHQUdULE9BQUF3RSxFQUFBeEosS0FBQStKLEtBQUFZLEtBZ0RBQyxDQUFBSixJQWlCQSxTQUFBSyxFQUFBaEIsRUFBQXRILEdBQ0F3SCxLQUFBRixNQUNBRSxLQUFBeEgsUUFZQSxTQUFBdUksS0E1QkEzQixFQUFBNEIsU0FBQSxTQUFBbEIsR0FDQSxJQUFBbUIsRUFBQSxJQUFBQyxNQUFBQyxVQUFBcEksT0FBQSxHQUNBLEdBQUFvSSxVQUFBcEksT0FBQSxFQUNBLFFBQUFqRCxFQUFBLEVBQXVCQSxFQUFBcUwsVUFBQXBJLE9BQXNCakQsSUFDN0NtTCxFQUFBbkwsRUFBQSxHQUFBcUwsVUFBQXJMLEdBR0FxSyxFQUFBaUIsS0FBQSxJQUFBTixFQUFBaEIsRUFBQW1CLElBQ0EsSUFBQWQsRUFBQXBILFFBQUFxSCxHQUNBUCxFQUFBVyxJQVNBTSxFQUFBcEosVUFBQWlKLElBQUEsV0FDQVgsS0FBQUYsSUFBQXVCLE1BQUEsS0FBQXJCLEtBQUF4SCxRQUVBNEcsRUFBQWtDLE1BQUEsVUFDQWxDLEVBQUFtQyxTQUFBLEVBQ0FuQyxFQUFBQyxPQUNBRCxFQUFBb0MsUUFDQXBDLEVBQUFxQyxRQUFBLEdBQ0FyQyxFQUFBc0MsWUFJQXRDLEVBQUFyRSxHQUFBZ0csRUFDQTNCLEVBQUF1QyxZQUFBWixFQUNBM0IsRUFBQXdDLEtBQUFiLEVBQ0EzQixFQUFBeUMsSUFBQWQsRUFDQTNCLEVBQUEwQyxlQUFBZixFQUNBM0IsRUFBQTJDLG1CQUFBaEIsRUFDQTNCLEVBQUE0QyxLQUFBakIsRUFDQTNCLEVBQUE2QyxnQkFBQWxCLEVBQ0EzQixFQUFBOEMsb0JBQUFuQixFQUVBM0IsRUFBQStDLFVBQUEsU0FBQTlMLEdBQXFDLFVBRXJDK0ksRUFBQWdELFFBQUEsU0FBQS9MLEdBQ0EsVUFBQXNKLE1BQUEscUNBR0FQLEVBQUFpRCxJQUFBLFdBQTJCLFdBQzNCakQsRUFBQWtELE1BQUEsU0FBQUMsR0FDQSxVQUFBNUMsTUFBQSxtQ0FFQVAsRUFBQW9ELE1BQUEsV0FBNEIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7XHJcbiAgaW5pdE1hcCxcclxuICBnZW9jb2RlQWRkcmVzcyxcclxuICBnZXRDb29yZHNPZlBsYWNlLFxyXG4gIGRpc3BsYXlQbGFjZU9uTWFwXHJcbn0gZnJvbSAnLi9nb29nbGUnXHJcblxyXG5cclxuXHJcbmV4cG9ydCB2YXIgc2VsZWN0ZWRJZDtcclxudmFyIGxvY2F0aW9uO1xyXG52YXIgdXNlcklkO1xyXG4vL3ZhciBzZXJ2ZXJCYXNlID0gXCIvL2xvY2FsaG9zdDo4MDgwL1wiO1xyXG5jb25zdCB7IHNlcnZlckJhc2UgfSA9IHJlcXVpcmUoJy4uL2NvbmZpZycpO1xyXG52YXIgVFJJUF9MSVNUX1VSTCA9IHNlcnZlckJhc2UgKyBnZXRVc2VySWQoKSArICcvdHJpcC1saXN0JztcclxuXHJcbi8vVGVtcGxhdGUgZm9yIHRyaXAgaXRlbS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxudmFyIHRyaXBJdGVtVGVtcGxhdGUgPSAoXHJcbiAgYDxsaSBjbGFzcz1cImpzLXRyaXAtaXRlbVwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwidHJpcC10aXRsZVwiPlxyXG4gICAgICAgIDxwPjxzcGFuIGNsYXNzPVwidHJpcC1pdGVtLW5hbWUganMtdHJpcC1pdGVtLW5hbWVcIj48L3NwYW4+PC9wPlxyXG4gICAgICAgIDxwPjxzcGFuIGNsYXNzPVwidHJpcC1pdGVtLWxvY2F0aW9uIGpzLXRyaXAtaXRlbS1sb2NhdGlvblwiPjwvc3Bhbj48L3A+XHJcbiAgICAgICAgPHA+PHNwYW4gY2xhc3M9XCJ0cmlwLWl0ZW0tZGF0ZXMganMtdHJpcC1pdGVtLWRhdGVzXCI+PC9zcGFuPjwvcD5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICA8ZGl2IGNsYXNzPVwidHJpcC1jb250cm9sc1wiPlxyXG5cclxuXHJcbiAgICAgICAgPGJ1dHRvbiB0aXRsZT1cIlZpZXcgY29tbWVudHNcIiBjbGFzcz1cInRyaXAtaXRlbS12aWV3IGpzLXRyaXAtaXRlbS12aWV3XCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cImltZy92aWV3LnBuZ1wiIC8+XHJcbiAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgIDxidXR0b24gIHRpdGxlPVwiQWRkIHBsYWNlXCIgY2xhc3M9XCJ0cmlwLWl0ZW0tYWRkXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cImltZy9hZGQucG5nXCIgLz5cclxuICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgPGJ1dHRvbiAgdGl0bGU9XCJFZGl0XCIgY2xhc3M9XCJ0cmlwLWl0ZW0tZWRpdCBqcy10cmlwLWl0ZW0tZWRpdFwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCJpbWcvZWRpdC5wbmdcIiAvPlxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICA8YnV0dG9uICB0aXRsZT1cIkRlbGV0ZVwiIGNsYXNzPVwidHJpcC1pdGVtLWRlbGV0ZSBqcy10cmlwLWl0ZW0tZGVsZXRlXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cImltZy9kZWxldGUucG5nXCIgLz5cclxuICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgIDxkaXY+XHJcbiAgICAgXHJcbiAgICA8L2xpPmBcclxuKTtcclxuLy8tRW5kIEJsb2NrLS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcblxyXG4vLyBHZXQgdXNlcklkIGZyb20gVVJMLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZnVuY3Rpb24gZ2V0VXNlcklkKCkge1xyXG4gIGNvbnN0IGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xyXG4gIHZhciBhcnJheSA9IGxvY2F0aW9uLnNlYXJjaC5zcGxpdCgnPScpO1xyXG4gICQuZ2V0SlNPTihUUklQX0xJU1RfVVJMLCBmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgIGlmKGl0ZW1zLmxlbmd0aCE9PTApe1xyXG4gICAgICByZW5kZXJTZWxlY3RlZE1hcChpdGVtc1swXS5sb2NhdGlvbik7XHJcbiAgICB9IGVsc2V7XHJcbiAgICAgICQoJy5wb3B1cC1vdmVybGF5LW5ldy10cmlwLCAucG9wdXAtY29udGVudC1uZXctdHJpcCcpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAkKFwiLmJveC1wYXJlbnRcIikuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgfSlcclxuICB1c2VySWQgPSBhcnJheVsxXTtcclxuICByZXR1cm4gYXJyYXlbMV07XHJcbn1cclxuY29uc29sZS5sb2coXCJVU0VSSUQ6IFwiLCBnZXRVc2VySWQoKSk7XHJcbi8vLUVuZCBCbG9jay0vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8vIExvYWRpbmcgSW5pdGlhbC91cGRhdGVkIGxpc3Qgb2YgdHJpcHMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZnVuY3Rpb24gZ2V0QW5kRGlzcGxheVRyaXBMaXN0KCkge1xyXG4gIGNvbnNvbGUubG9nKCdSZXRyaWV2aW5nIHRyaXAgbGlzdCcpO1xyXG4gICQuZ2V0SlNPTihUUklQX0xJU1RfVVJMLCBmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgIGNvbnNvbGUubG9nKCdSZW5kZXJpbmcgdHJpcCBsaXN0Jyk7XHJcbiAgICBjb25zb2xlLmxvZyhpdGVtcyk7XHJcbiAgICB2YXIgaXRlbUVsZW1lbnRzID0gaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhpdGVtKTtcclxuXHJcbiAgICAgIHZhciBlbGVtZW50ID0gJCh0cmlwSXRlbVRlbXBsYXRlKTtcclxuICAgICAgZWxlbWVudC5hdHRyKCdpZCcsIGl0ZW0uaWQpO1xyXG5cclxuICAgICAgdmFyIGl0ZW1OYW1lID0gZWxlbWVudC5maW5kKCcuanMtdHJpcC1pdGVtLW5hbWUnKTtcclxuICAgICAgaXRlbU5hbWUudGV4dChpdGVtLm5hbWUpO1xyXG5cclxuICAgICAgdmFyIGl0ZW1Mb2NhdGlvbiA9IGVsZW1lbnQuZmluZCgnLmpzLXRyaXAtaXRlbS1sb2NhdGlvbicpO1xyXG4gICAgICBpdGVtTG9jYXRpb24udGV4dChpdGVtLmxvY2F0aW9uKTtcclxuXHJcbiAgICAgIHZhciBpdGVtVHJpcERhdGVzID0gZWxlbWVudC5maW5kKCcuanMtdHJpcC1pdGVtLWRhdGVzJyk7XHJcbiAgICAgIHZhciBjb252ZXJ0ZWRJdGVtVHJpcERhdGVzID0gY29udmVydERhdGVGcm9tTW9uZ29EQihpdGVtLnRyaXBEYXRlcyk7XHJcbiAgICAgIGl0ZW1UcmlwRGF0ZXMudGV4dChjb252ZXJ0ZWRJdGVtVHJpcERhdGVzKTtcclxuICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuanMtdHJpcC1saXN0JykuaHRtbChpdGVtRWxlbWVudHMpO1xyXG4gICAgXHJcbiAgfSk7XHJcbn1cclxuLy8tRW5kIEJsb2NrLS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy9BZGRpbmcgbmV3IHRyaXAgaXRlbS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2xvc2VOZXdUcmlwRm9ybSgpIHtcclxuICAkKCdtYWluJykub24oJ2NsaWNrJywgJy5jYW5jZWx0cmlwJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoXCIucG9wdXAtb3ZlcmxheS1uZXctdHJpcCwgLnBvcHVwLWNvbnRlbnQtbmV3LXRyaXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKFwiLmJveC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyVHJpcEZvcm0oKSB7XHJcbiAgJCgnI2pzLXRyaXAtaXRlbS1hZGQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcucG9wdXAtb3ZlcmxheS1uZXctdHJpcCwgLnBvcHVwLWNvbnRlbnQtbmV3LXRyaXAnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoXCIuYm94LXBhcmVudFwiKS5hZGRDbGFzcyhcImluYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRUcmlwSXRlbShpdGVtKSB7XHJcbiAgJC5hamF4KHtcclxuICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICB1cmw6IFRSSVBfTElTVF9VUkwsXHJcbiAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShpdGVtKSxcclxuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgZ2V0QW5kRGlzcGxheVRyaXBMaXN0KCk7XHJcbiAgICB9LFxyXG4gICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgfSkudGhlbigoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkFkZGluZyB0cmlwOiBcIiArIGl0ZW0pO1xyXG4gICAgZ2V0QW5kRGlzcGxheVRyaXBMaXN0KCk7XHJcbiAgICByZW5kZXJTZWxlY3RlZE1hcChpdGVtLmxvY2F0aW9uKTtcclxuXHJcbiAgICAkLmdldEpTT04oVFJJUF9MSVNUX1VSTCwgZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgIHNlbGVjdGVkSWQgPSBpdGVtc1swXS5pZDtcclxuICAgIH0pXHJcbiAgICAkKFwiLnBvcHVwLW92ZXJsYXktbmV3LXRyaXAsIC5wb3B1cC1jb250ZW50LW5ldy10cmlwXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJChcIi5ib3gtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIik7XHJcblxyXG4gICAgJCgnI2pzLW5ldy1uYW1lJykudmFsKCcnKTtcclxuICAgICQoJyNqcy1uZXctbG9jYXRpb24nKS52YWwoJycpO1xyXG4gICAgJCgnI2pzLW5ldy10ZXh0QXJlYScpLnZhbCgnJyk7XHJcbiAgICAkKCcjanMtbmV3LWRhdGVzJykudmFsKCcnKTtcclxuICB9KS50aGVuKCgpPT57ICAgXHJcbiAgICAkKCcucG9wdXAtb3ZlcmxheS12aWV3LWFkZFBsYWNlRm9ybSwgLnBvcHVwLWNvbnRlbnQtdmlldy1hZGRQbGFjZUZvcm0nKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoXCIuYm94LXBhcmVudFwiKS5hZGRDbGFzcyhcImluYWN0aXZlXCIpO1xyXG4gICAgcmVuZGVyQWRkUGxhY2VGb3JtKCk7XHJcbiAgfSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUcmlwTGlzdEFkZCgpIHtcclxuICByZW5kZXJUcmlwRm9ybSgpO1xyXG4gICQoXCIjanMtYWRkLXRyaXAtZm9ybVwiKS5zdWJtaXQoZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGl0ZW0gPSBnZXRUcmlwRm9ybURldGFpbHMoZSk7XHJcbiAgICBpdGVtLnRyaXBEYXRlcyA9IGNvbnZlcnREYXRlSW50b01vbmdvREIoaXRlbS50cmlwRGF0ZXMpO1xyXG4gICAgYWRkVHJpcEl0ZW0oaXRlbSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRyaXBGb3JtRGV0YWlscyhlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIG5hbWU6ICQoZS5jdXJyZW50VGFyZ2V0KS5maW5kKCcjanMtbmV3LW5hbWUnKS52YWwoKSxcclxuICAgIGxvY2F0aW9uOiAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnI2pzLW5ldy1sb2NhdGlvbicpLnZhbCgpLFxyXG4gICAgY29udGVudDogJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJyNqcy1uZXctdGV4dEFyZWEnKS52YWwoKSxcclxuICAgIHRyaXBEYXRlczogJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJyNqcy1uZXctZGF0ZXMnKS52YWwoKVxyXG4gIH1cclxufVxyXG5mdW5jdGlvbiByZW5kZXJBZGRQbGFjZUZvcm0oKXtcclxuICAkKCcucG9wdXAtY29udGVudC12aWV3LWFkZFBsYWNlRm9ybScpLmh0bWwoYCAgICAgICAgXHJcbiAgICA8aDM+UGxlYXNlLCBhZGQgcGxhY2UgeW91IGhhdmUgdmlzaXRlZCA8L2gzPlxyXG4gICAgPGRpdiBjbGFzcz1cImFkZFBsYWNlRm9ybS1jb250cm9sc1wiPlxyXG4gIFxyXG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBqcy10cmlwLWl0ZW0tYWRkUGxhY2VcIj5cclxuICAgICAgQWRkXHJcbiAgICA8L2J1dHRvbj5cclxuICBcclxuICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24ganMtdHJpcC1pdGVtLXNraXBBZGRUcmlwXCI+XHJcbiAgICAgICBTa2lwXHJcbiAgICA8L2J1dHRvbj5cclxuICBcclxuICA8ZGl2PlxyXG5gKTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVTa2lwQWRkUGxhY2VGb3JtKCkge1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLmpzLXRyaXAtaXRlbS1za2lwQWRkVHJpcCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAkKFwiLnBvcHVwLW92ZXJsYXktdmlldy1hZGRQbGFjZUZvcm0sIC5wb3B1cC1jb250ZW50LXZpZXctYWRkUGxhY2VGb3JtXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJChcIi5ib3gtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgfSk7XHJcbn1cclxuLy8tRW5kIEJsb2NrLS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy9EZWxldGUgdHJpcCBpdGVtLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmZ1bmN0aW9uIGRlbGV0ZXRyaXAodHJpcElkKSB7XHJcbiAgY29uc29sZS5sb2coJ0RlbGV0aW5nIHRyaXAgYCcgKyB0cmlwSWQgKyAnYCcpO1xyXG4gICQuYWpheCh7XHJcbiAgICB1cmw6IFRSSVBfTElTVF9VUkwgKyAnLycgKyB0cmlwSWQsXHJcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgc3VjY2VzczogZ2V0QW5kRGlzcGxheVRyaXBMaXN0XHJcbiAgfSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUcmlwRGVsZXRlKCkge1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLmpzLXRyaXAtaXRlbS1kZWxldGUnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZGVsZXRldHJpcChcclxuICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5qcy10cmlwLWl0ZW0nKS5hdHRyKCdpZCcpKTtcclxuXHJcbiAgfSk7XHJcblxyXG4gICQuZ2V0SlNPTihUUklQX0xJU1RfVVJMLCBmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgIGlmKGl0ZW1zLmxlbmd0aCE9PTApe1xyXG4gICAgICByZW5kZXJTZWxlY3RlZE1hcChpdGVtc1swXS5sb2NhdGlvbik7XHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG4vLy1FbmQgQmxvY2stLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vL0NyZWF0ZShhZGQpIHBsYWNlIHlvdSBoYXZlIGJlZW4gdmlzaXRlZCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZnVuY3Rpb24gaGFuZGxlQWRkUGxhY2UoKSB7XHJcbiAgJCgnbWFpbicpLm9uKCdjbGljaycsICcuanMtdHJpcC1pdGVtLWFkZFBsYWNlLCAudHJpcC1pdGVtLWFkZCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKCcucG9wdXAtb3ZlcmxheS12aWV3LWFkZFBsYWNlRm9ybSwgLnBvcHVwLWNvbnRlbnQtdmlldy1hZGRQbGFjZUZvcm0nKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoJy5wb3B1cC1vdmVybGF5LWFkZC1wbGFjZSwgLnBvcHVwLWNvbnRlbnQtYWRkLXBsYWNlJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKFwiLmJveC1wYXJlbnRcIikuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuICAgIGFkZFBsYWNlRm9ybSgpO1xyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUGxhY2VGb3JtKCl7XHJcbiAgJCgnLnBvcHVwLWNvbnRlbnQtYWRkLXBsYWNlJykuaHRtbChgICAgICAgICBcclxuICA8Zm9ybSBpZD1cImpzLWFkZC1wbGFjZS1mb3JtXCI+XHJcbiAgPGxhYmVsIGZvcj1cImpzLWFkZC1wbGFjZS1mb3JtXCI+PHNwYW4+IDxoND5QbGVhc2UgYWRkIHBsYWNlIHlvdSBoYXZlIHZpc2l0ZWQgaW4gJHtsb2NhdGlvbn0gPC9oND4gPC9zcGFuPjwvbGFiZWw+XHJcbiAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImpzLXRyaXAtcGxhY2UtbmFtZVwiIGlkPVwianMtcGxhY2UtbmFtZVwiIHBsYWNlaG9sZGVyPVwiR29sZGVuIEdhdGUgQnJpZGdlIC4uLi5cIiByZXF1aXJlZD48YnI+XHJcbiAgXHJcbiAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidXR0b25cIiBpZD1cImFkZFBsYWNlXCI+XHJcbiAgICBBZGRcclxuICA8L2J1dHRvbj5cclxuICBcclxuICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGpzLXRyaXAtYWRkUGxhY2UtY2xvc2VcIj5cclxuICAgIENhbmNlbFxyXG4gIDwvYnV0dG9uPlxyXG5cclxuICA8L2Zvcm0+XHJcbmApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDbG9zZUFkZFBsYWNlVmlldygpIHtcclxuICAkKCdtYWluJykub24oJ2NsaWNrJywgJy5qcy10cmlwLWFkZFBsYWNlLWNsb3NlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoJy5wb3B1cC1vdmVybGF5LWFkZC1wbGFjZSwgLnBvcHVwLWNvbnRlbnQtYWRkLXBsYWNlJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKFwiLmJveC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuXHJcbiAgfSk7XHJcbn1cclxuY29uc3Qgc2F2ZUFuZFJlbmRlck1hcmtlciA9IGZ1bmN0aW9uIChwbGFjZSkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGxhdCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQ7XHJcbiAgICBjb25zdCBsbmcgPSByZXNwb25zZS5kYXRhLnJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24ubG5nO1xyXG5cclxuICAgIGNvbnN0IGl0ZW1QbGFjZSA9IHtcclxuICAgICAgbmFtZTogcGxhY2UsXHJcbiAgICAgIGxhdDogbGF0LFxyXG4gICAgICBsbmc6IGxuZ1xyXG4gICAgfVxyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIHVybDogVFJJUF9MSVNUX1VSTCtgLyR7c2VsZWN0ZWRJZH0vcGxhY2VzYCxcclxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoaXRlbVBsYWNlKSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGdldEFuZERpc3BsYXlUcmlwTGlzdCgpO1xyXG4gICAgICB9LFxyXG4gICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgfSlcclxuXHJcbiAgICBkaXNwbGF5UGxhY2VPbk1hcChpdGVtUGxhY2UpO1xyXG4gICAgJCgnLnBvcHVwLW92ZXJsYXktYWRkLXBsYWNlLCAucG9wdXAtY29udGVudC1hZGQtcGxhY2UnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoJy5wb3B1cC1vdmVybGF5LXZpZXctb25lTW9yZVBsYWNlLCAucG9wdXAtY29udGVudC12aWV3LW9uZU1vcmVQbGFjZScpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJCgnLnBvcHVwLWNvbnRlbnQtdmlldy1vbmVNb3JlUGxhY2UnKS5odG1sKGAgICAgICAgIFxyXG4gICAgPGRpdiBpZD1cImpzLWFkZC1vbmVNb3JlUGxhY2VcIj5cclxuXHJcbiAgICA8aDI+QWRkIG9uZSBtb3JlIHBsYWNlPzwvaDI+XHJcbiAgICBcclxuICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPSBcImJ1dHRvblwiIGlkPVwiYWRkT25lTW9yZVBsYWNlXCI+XHJcbiAgICAgIFllc1xyXG4gICAgPC9idXR0b24+XHJcbiAgICBcclxuICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24ganMtdHJpcC1hZGRPbmVNb3JlUGxhY2UtY2FuY2VsXCI+XHJcbiAgICAgIE5vXHJcbiAgICA8L2J1dHRvbj5cclxuXHJcbiAgICA8L2Rpdj5cclxuICAgIGApO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZE9uZU1vcmVQbGFjZSgpe1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnI2FkZE9uZU1vcmVQbGFjZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKFwiLnBvcHVwLW92ZXJsYXktdmlldy1vbmVNb3JlUGxhY2UsIC5wb3B1cC1jb250ZW50LXZpZXctb25lTW9yZVBsYWNlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJCgnLnBvcHVwLW92ZXJsYXktYWRkLXBsYWNlLCAucG9wdXAtY29udGVudC1hZGQtcGxhY2UnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoJyNqcy1wbGFjZS1uYW1lJykudmFsKCcnKTtcclxuICAgIC8vJChcIi5ib3gtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgfSk7XHJcbiAgYWRkUGxhY2VGb3JtKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhbmNlbEFkZE9uZU1vcmVQbGFjZSgpe1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLmpzLXRyaXAtYWRkT25lTW9yZVBsYWNlLWNhbmNlbCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKFwiLnBvcHVwLW92ZXJsYXktdmlldy1vbmVNb3JlUGxhY2UsIC5wb3B1cC1jb250ZW50LXZpZXctb25lTW9yZVBsYWNlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJChcIi5ib3gtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgfSk7XHJcblxyXG59XHJcbndpbmRvdy5zYXZlQW5kUmVuZGVyTWFya2VyID0gc2F2ZUFuZFJlbmRlck1hcmtlcjtcclxuZnVuY3Rpb24gaGFuZGxlU2F2ZU5ld1BsYWNlKCkge1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnI2FkZFBsYWNlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBwbGFjZSA9ICQoJyNqcy1hZGQtcGxhY2UtZm9ybScpLmZpbmQoJ2lucHV0W25hbWU9XCJqcy10cmlwLXBsYWNlLW5hbWVcIl0nKS52YWwoKTtcclxuIFxyXG4gICAgZ2V0Q29vcmRzT2ZQbGFjZShwbGFjZSlcclxuICAgICAgLnRoZW4oc2F2ZUFuZFJlbmRlck1hcmtlcihwbGFjZSkpXHJcbiAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG4vLy1FbmQgQmxvY2stLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vLyBWaWV3KGVkaXQpIHRyaXAgY29tbWVudHMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZnVuY3Rpb24gaGFkbGVWaWV3VHJpcCgpIHtcclxuICAkKCdtYWluJykub24oJ2NsaWNrJywgJy5qcy10cmlwLWl0ZW0tdmlldycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKCcucG9wdXAtb3ZlcmxheS12aWV3LWZ1bGxUcmlwLCAucG9wdXAtY29udGVudC12aWV3LWZ1bGxUcmlwJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKFwiLmJveC1wYXJlbnRcIikuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuXHJcbiAgICB2YXIgZWxlbWVudCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzLXRyaXAtaXRlbVwiKTtcclxuICAgIHZhciBpdGVtO1xyXG4gICAgJC5nZXRKU09OKFRSSVBfTElTVF9VUkwsIGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICBpdGVtID0gaXRlbXMuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IGVsZW1lbnQuYXR0cihcImlkXCIpKTtcclxuICAgICAgdXBkYXRlVmlld0Z1bGxUcmlwKGl0ZW0pO1xyXG4gICAgfSk7XHJcblxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVWaWV3RnVsbFRyaXAoaXRlbSkge1xyXG4gICQoJy5wb3B1cC1jb250ZW50LXZpZXctZnVsbFRyaXAnKS5odG1sKGAgICAgICAgIFxyXG4gIDxkaXYgaWQ9XCJmdWxsLXRyaXAtdmlld1wiPlxyXG4gICAgPHA+PHNwYW4gY2xhc3M9XCJ0cmlwLWl0ZW0ganMtZnVsbC10cmlwLWNvbnRlbnRcIj48L3NwYW4+JHtpdGVtLmNvbnRlbnR9PC9wPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXYgY2xhc3M9XCJmdWxsLXRyaXAtY29udHJvbHNcIj5cclxuICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGpzLXRyaXAtaXRlbS1lZGl0Y29udGVudFwiPlxyXG4gICAgRWRpdFxyXG4gIDwvYnV0dG9uPlxyXG4gIDxidXR0b24gY2xhc3M9XCJidXR0b24ganMtdHJpcC1pdGVtLWNsb3NlXCI+XHJcbiAgICBDYW5jZWxcclxuICA8L2J1dHRvbj5cclxuPGRpdj5cclxuYCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNvbnRlbnRFZGl0KCkge1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLmpzLXRyaXAtaXRlbS1lZGl0Y29udGVudCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBcclxuICAgICQuZ2V0SlNPTihUUklQX0xJU1RfVVJMLCBmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgICAgdmFyIGl0ZW0gPSBpdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gc2VsZWN0ZWRJZCk7XHJcbiAgICAgIGdldENvbnRlbnRGb3JtV2l0aERldGFpbHMoaXRlbSk7XHJcbiAgICAgIHNhdmVVcGRhdGVkQ29udGVudChpdGVtKTtcclxuICAgIH0pO1xyXG4gIH0pOyAgICBcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVDbG9zZUZ1bGxWaWV3KCkge1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLmpzLXRyaXAtaXRlbS1jbG9zZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKFwiLnBvcHVwLW92ZXJsYXktdmlldy1mdWxsVHJpcCwgLnBvcHVwLWNvbnRlbnQtdmlldy1mdWxsVHJpcFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoXCIuYm94LXBhcmVudFwiKS5yZW1vdmVDbGFzcyhcImluYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG59XHJcbi8vLUVuZCBCbG9jay0vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8vIEVkaXQgdHJpcCBpdGVtIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZnVuY3Rpb24gaGFuZGxlVHJpcEVkaXQoKSB7XHJcbiAgJCgnbWFpbicpLm9uKCdjbGljaycsICcuanMtdHJpcC1pdGVtLWVkaXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJC5nZXRKU09OKFRSSVBfTElTVF9VUkwsIGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICB2YXIgaXRlbSA9IGl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBzZWxlY3RlZElkKTtcclxuICAgICAgZ2V0VHJpcEZvcm1XaXRoRGV0YWlscyhpdGVtKTtcclxuICAgIH0pO1xyXG4gICAgc2F2ZVVwZGF0ZWRUcmlwKHNlbGVjdGVkSWQpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUcmlwRm9ybVdpdGhEZXRhaWxzKGl0ZW0pIHtcclxuICAkKCcjanMtdXBkLXRyaXAtZm9ybScpLmZpbmQoJyNqcy11cGQtbmFtZScpLnZhbChpdGVtLm5hbWUpO1xyXG4gICQoJyNqcy11cGQtdHJpcC1mb3JtJykuZmluZCgnI2pzLXVwZC1sb2NhdGlvbicpLnZhbChpdGVtLmxvY2F0aW9uKTtcclxuICAkKCcjanMtdXBkLXRyaXAtZm9ybScpLmZpbmQoJyNqcy11cGQtdGV4dEFyZWEnKS52YWwoaXRlbS5jb250ZW50KTtcclxuICB2YXIgY29udmVydGVkVHJpcERhdGVzID0gY29udmVydERhdGVGcm9tTW9uZ29EQihpdGVtLnRyaXBEYXRlcyk7XHJcbiAgJCgnI2pzLXVwZC10cmlwLWZvcm0nKS5maW5kKCcjanMtdXBkLWRhdGVzJykudmFsKGNvbnZlcnRlZFRyaXBEYXRlcyk7XHJcblxyXG4gICQoJy5wb3B1cC1vdmVybGF5LXVwZC10cmlwLCAucG9wdXAtY29udGVudC11cGQtdHJpcCcpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICQoXCIuYm94LXBhcmVudFwiKS5hZGRDbGFzcyhcImluYWN0aXZlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDb250ZW50Rm9ybVdpdGhEZXRhaWxzKGl0ZW0pIHtcclxuICAkKCcjanMtdXBkLWNvbnRlbnQtZm9ybScpLmZpbmQoJyNqcy11cGQtdGV4dEFyZWEnKS52YWwoaXRlbS5jb250ZW50KTtcclxuICAkKCcucG9wdXAtb3ZlcmxheS12aWV3LWZ1bGxUcmlwLCAucG9wdXAtY29udGVudC12aWV3LWZ1bGxUcmlwJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcblxyXG4gICQoJy5wb3B1cC1vdmVybGF5LXZpZXctY29udGVudCwgLnBvcHVwLWNvbnRlbnQtdmlldy1jb250ZW50JykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgJChcIi5ib3gtcGFyZW50XCIpLmFkZENsYXNzKFwiaW5hY3RpdmVcIik7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzYXZlVXBkYXRlZENvbnRlbnQoaXRlbSl7XHJcblxyXG4gICQoXCIjanMtdXBkLWNvbnRlbnQtZm9ybVwiKS5vbihcImNsaWNrXCIsIFwiI3VwZGF0ZWNvbnRlbnRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgXHJcbiAgICB2YXIgbmV3SXRlbSA9IHtcclxuICAgICAgaWQ6IGl0ZW0uaWQsXHJcbiAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcclxuICAgICAgbG9jYXRpb246IGl0ZW0ubG9jYXRpb24sXHJcbiAgICAgIGNvbnRlbnQ6ICQoJyNqcy11cGQtY29udGVudC1mb3JtJykuZmluZCgndGV4dGFyZWEnKS52YWwoKSxcclxuICAgICAgdHJpcERhdGVzOiBpdGVtLnRyaXBkYXRlc1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coVFJJUF9MSVNUX1VSTCArIFwiL1wiICsgbmV3SXRlbS5pZCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJVcGRhdGluZyB0cmlwIGl0ZW0gYFwiICsgbmV3SXRlbS5pZCArIFwiYFwiKTtcclxuICAgIGNvbnNvbGUubG9nKG5ld0l0ZW0pO1xyXG5cclxuICAgIGlmIChzZWxlY3RlZElkID09PSBuZXdJdGVtLmlkKSB7XHJcbiAgICAgIHJ1bkFqYXgobmV3SXRlbSk7XHJcbiAgICAgICQoXCIucG9wdXAtb3ZlcmxheS12aWV3LWNvbnRlbnQsIC5wb3B1cC1jb250ZW50LXZpZXctY29udGVudFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgJChcIi5ib3gtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzYXZlVXBkYXRlZFRyaXAodHJpcElkKSB7XHJcbiAgJChcIiNqcy11cGQtdHJpcC1mb3JtXCIpLm9uKFwiY2xpY2tcIiwgXCIjdXBkYXRldHJpcFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIGl0ZW0gPSB7XHJcbiAgICAgIGlkOiB0cmlwSWQsXHJcbiAgICAgIG5hbWU6ICQoJyNqcy11cGQtdHJpcC1mb3JtJykuZmluZCgnaW5wdXRbbmFtZT1cImpzLXVwZC10cmlwLWZvcm0tbmFtZVwiXScpLnZhbCgpLFxyXG4gICAgICBsb2NhdGlvbjogJCgnI2pzLXVwZC10cmlwLWZvcm0nKS5maW5kKCdpbnB1dFtuYW1lPVwianMtdXBkLXRyaXAtZm9ybS1sb2NhdGlvblwiXScpLnZhbCgpLFxyXG4gICAgICB0cmlwRGF0ZXM6ICQoJyNqcy11cGQtdHJpcC1mb3JtJykuZmluZCgnaW5wdXRbbmFtZT1cImpzLXVwZC10cmlwLWZvcm0tZGF0ZXNcIl0nKS52YWwoKSxcclxuICAgIH07XHJcbiAgICBjb25zb2xlLmxvZyhpdGVtLmNvbnRlbnQpO1xyXG4gICAgdmFyIG1vbmdvRm9ybWF0RGF0ZSA9IGl0ZW0udHJpcERhdGVzO1xyXG4gICAgaXRlbS50cmlwRGF0ZXMgPSBjb252ZXJ0RGF0ZUludG9Nb25nb0RCKG1vbmdvRm9ybWF0RGF0ZSk7XHJcbiAgICBjb25zb2xlLmxvZyhUUklQX0xJU1RfVVJMICsgXCIvXCIgKyBpdGVtLmlkKTtcclxuICAgIGNvbnNvbGUubG9nKFwiVXBkYXRpbmcgdHJpcCBpdGVtIGBcIiArIGl0ZW0uaWQgKyBcImBcIik7XHJcbiAgICBpZiAoc2VsZWN0ZWRJZCA9PT0gaXRlbS5pZCkge1xyXG4gICAgICBydW5BamF4KGl0ZW0pOyAgXHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJ1bkFqYXgoaXRlbSkge1xyXG4gICQuYWpheCh7XHJcbiAgICAgIHVybDogVFJJUF9MSVNUX1VSTCArIFwiL1wiICsgaXRlbS5pZCxcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShpdGVtKSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBnZXRBbmREaXNwbGF5VHJpcExpc3QoKTtcclxuICAgICAgfSxcclxuICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICQoXCIucG9wdXAtb3ZlcmxheS11cGQtdHJpcCwgLnBvcHVwLWNvbnRlbnQtdXBkLXRyaXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICQoXCIuYm94LXBhcmVudFwiKS5yZW1vdmVDbGFzcyhcImluYWN0aXZlXCIpO1xyXG4gICAgICAkKCcjanMtdXBkLW5hbWUnKS52YWwoJycpO1xyXG4gICAgICAkKCcjanMtdXBkLWxvY2F0aW9uJykudmFsKCcnKTtcclxuICAgICAgJCgnI2pzLXVwZC10ZXh0QXJlYScpLnZhbCgnJyk7XHJcbiAgICAgICQoJyNqcy11cGQtZGF0ZXMnKS52YWwoJycpO1xyXG4gICAgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJVcGRhdGluZyB0cmlwIGxpc3Q6IFwiICsgaXRlbSk7XHJcbiAgICAgIGdldEFuZERpc3BsYXlUcmlwTGlzdCgpO1xyXG4gICAgICB2YXIgbW9uZ29Gb3JtYXREYXRlID0gYCR7aXRlbS50cmlwRGF0ZXMuc3RhcnREYXRlfS8ke2l0ZW0udHJpcERhdGVzLmVuZERhdGV9YDtcclxuICAgICAgaXRlbS50cmlwRGF0ZXMgPSBjb252ZXJ0RGF0ZUZyb21Nb25nb0RCKG1vbmdvRm9ybWF0RGF0ZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2xvc2VFZGl0VmlldygpIHtcclxuICAkKCdtYWluJykub24oJ2NsaWNrJywgJy5qcy10cmlwLXVwZC1jbG9zZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKFwiLnBvcHVwLW92ZXJsYXktdmlldy1jb250ZW50LCAucG9wdXAtY29udGVudC12aWV3LWNvbnRlbnRcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKFwiLnBvcHVwLW92ZXJsYXktdXBkLXRyaXAsIC5wb3B1cC1jb250ZW50LXVwZC10cmlwXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJChcIi5ib3gtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgfSk7XHJcbn1cclxuLy8tRW5kIEJsb2NrLS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy9IYW5kbGUgb24gc2VsZWN0ZWQgdHJpcCBldmVudCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5mdW5jdGlvbiBoYW5kbGVTZWxlY3RUcmlwKCkge1xyXG4gIHZhciBwcmV2RWxlbWVudDtcclxuICAkKCdtYWluJykub24oJ2NsaWNrJywgJy50cmlwLXRpdGxlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBlbGVtZW50ID0gJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanMtdHJpcC1pdGVtXCIpO1xyXG4gICAgc2VsZWN0ZWRJZCA9IGVsZW1lbnQuYXR0cihcImlkXCIpO1xyXG4gICAgc2hvd1BsYWNlcyhzZWxlY3RlZElkKTtcclxuICAgIGlmICghcHJldkVsZW1lbnQpIHtcclxuICAgICAgdmFyIGN1cnJlbnRFbGVtZW50ID0gJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanMtdHJpcC1pdGVtXCIpO1xyXG4gICAgICBsb2NhdGlvbiA9IGN1cnJlbnRFbGVtZW50LmZpbmQoXCIuanMtdHJpcC1pdGVtLWxvY2F0aW9uXCIpLnRleHQoKTtcclxuICAgICAgY3VycmVudEVsZW1lbnQuZmluZChcIi50cmlwLWNvbnRyb2xzXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICByZW5kZXJTZWxlY3RlZE1hcChsb2NhdGlvbik7XHJcbiAgICAgIHByZXZFbGVtZW50ID0gY3VycmVudEVsZW1lbnQ7XHJcbiAgICB9IGVsc2UgaWYgKHByZXZFbGVtZW50ICE9PSBjdXJyZW50RWxlbWVudCkge1xyXG4gICAgICBwcmV2RWxlbWVudC5maW5kKFwiLnRyaXAtY29udHJvbHNcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzLXRyaXAtaXRlbVwiKTtcclxuICAgICAgbG9jYXRpb24gPSBjdXJyZW50RWxlbWVudC5maW5kKFwiLmpzLXRyaXAtaXRlbS1sb2NhdGlvblwiKS50ZXh0KCk7XHJcbiAgICAgIGN1cnJlbnRFbGVtZW50LmZpbmQoXCIudHJpcC1jb250cm9sc1wiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHJcbiAgICAgIHJlbmRlclNlbGVjdGVkTWFwKGxvY2F0aW9uKTtcclxuICAgICAgcHJldkVsZW1lbnQgPSBjdXJyZW50RWxlbWVudDtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyU2VsZWN0ZWRNYXAobG9jYXRpb24pe1xyXG4gIGF4aW9zLmdldCgnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbicsIHtcclxuICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICBhZGRyZXNzOiBsb2NhdGlvbixcclxuICAgICAgICAgICAga2V5OiAnQUl6YVN5RHFLWUNJMVhoWExlejY4blpraTc1VTROaXp4MEF1NnY4J1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oXHJcbiAgICAgICAgICBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgZ2VvY29kZUFkZHJlc3MocmVzcG9uc2UpO1xyXG5cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG4vLy1FbmQgQmxvY2stLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuLy9GdW5jdGlvbnMgY29udmVydGluZyBhbmQgc2F2aW5nIHRyaXAgZGF0ZXMgd2l0aCBNb25nb0RCLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5leHBvcnQgZnVuY3Rpb24gY29udmVydERhdGVJbnRvTW9uZ29EQihtb25nb0Zvcm1hdERhdGUpIHtcclxuICB2YXIgYXJyYXkgPSBtb25nb0Zvcm1hdERhdGUuc3BsaXQoJy0nKTtcclxuICB2YXIgc3RhcnREYXRlID0gbmV3IERhdGUoYXJyYXlbMF0pO1xyXG4gIHZhciBlbmREYXRlID0gbmV3IERhdGUoYXJyYXlbMV0pO1xyXG4gIHZhciB0cmlwRGF0ZXMgPSB7XHJcbiAgICBzdGFydERhdGU6IHtcclxuICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgIH0sXHJcbiAgICBlbmREYXRlOiB7XHJcbiAgICAgIHR5cGU6IERhdGUsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICB9XHJcbiAgfVxyXG4gIHRyaXBEYXRlcy5zdGFydERhdGUgPSBzdGFydERhdGU7XHJcbiAgdHJpcERhdGVzLmVuZERhdGUgPSBlbmREYXRlO1xyXG4gIHJldHVybiB0cmlwRGF0ZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0RGF0ZUZyb21Nb25nb0RCKG1vbmdvRm9ybWF0RGF0ZSkge1xyXG4gIHZhciBhcnJheSA9IG1vbmdvRm9ybWF0RGF0ZS5zcGxpdCgnLycpO1xyXG4gIHZhciBzdGFydERhdGUgPSBuZXcgRGF0ZShhcnJheVswXSk7XHJcbiAgdmFyIGVuZERhdGUgPSBuZXcgRGF0ZShhcnJheVsxXSk7XHJcbiAgdmFyIGNvbnZlcnRlZFN0YXJ0RGF0ZSA9IGAke3N0YXJ0RGF0ZS5nZXRNb250aCgpKzF9LyR7c3RhcnREYXRlLmdldERhdGUoKX0vJHtzdGFydERhdGUuZ2V0RnVsbFllYXIoKX1gXHJcbiAgdmFyIGNvbnZlcnRlZEVuZERhdGUgPSBgJHtlbmREYXRlLmdldE1vbnRoKCkrMX0vJHtlbmREYXRlLmdldERhdGUoKX0vJHtlbmREYXRlLmdldEZ1bGxZZWFyKCl9YFxyXG4gIHZhciBjb252ZXJ0ZWRGdWxsRGF0ZSA9IGAke2NvbnZlcnRlZFN0YXJ0RGF0ZX0gLSAke2NvbnZlcnRlZEVuZERhdGV9YDtcclxuICByZXR1cm4gY29udmVydGVkRnVsbERhdGU7XHJcbn1cclxuLy8tRW5kIEJsb2NrLS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy9GdW5jdGlvbiBmb3Igc2hvdyB1cCBtYXJrZXJzKHBsYWNlcyBvbiBHb29nbGUgTWFwcykvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5leHBvcnQgZnVuY3Rpb24gc2hvd1BsYWNlcyhzZWxlY3RlZElkKXtcclxuICAkLmdldEpTT04oVFJJUF9MSVNUX1VSTCwgZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICB2YXIgaXRlbSA9IGl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBzZWxlY3RlZElkKTtcclxuICAgICAgZm9yKGxldCBpPTA7IGk8aXRlbS5wbGFjZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGRpc3BsYXlQbGFjZU9uTWFwKGl0ZW0ucGxhY2VzW2ldKTtcclxuICAgICAgfVxyXG4gIH0pO1xyXG59XHJcbi8vLUVuZCBCbG9jay0vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbndpbmRvdy5pbml0TWFwID0gaW5pdE1hcDtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gIGdldEFuZERpc3BsYXlUcmlwTGlzdCgpO1xyXG4gIGhhbmRsZVRyaXBEZWxldGUoKTtcclxuICBoYW5kbGVTZWxlY3RUcmlwKCk7XHJcbiAgaGFuZGxlVHJpcExpc3RBZGQoKTtcclxuICBoYW5kbGVUcmlwRWRpdCgpO1xyXG4gIGhhbmRsZUFkZFBsYWNlKCk7XHJcbiAgaGFkbGVWaWV3VHJpcCgpO1xyXG4gIGhhbmRsZUNsb3NlRnVsbFZpZXcoKTtcclxuICBoYW5kbGVDbG9zZUVkaXRWaWV3KCk7XHJcbiAgaGFuZGxlQ2xvc2VBZGRQbGFjZVZpZXcoKTtcclxuICBoYW5kbGVTYXZlTmV3UGxhY2UoKTtcclxuICBoYW5kbGVTa2lwQWRkUGxhY2VGb3JtKCk7XHJcbiAgaGFuZGxlQWRkT25lTW9yZVBsYWNlKCk7XHJcbiAgaGFuZGxlQ2FuY2VsQWRkT25lTW9yZVBsYWNlKCk7XHJcbiAgaGFuZGxlQ29udGVudEVkaXQoKTtcclxuICBoYW5kbGVDbG9zZU5ld1RyaXBGb3JtKCk7XHJcbn0pIiwiXHJcbi8vdmFyIHNlcnZlckJhc2UgPSBcIi8vbG9jYWxob3N0OjgwODAvXCI7XHJcbmNvbnN0IHsgc2VydmVyQmFzZSB9ID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XHJcbnZhciBUUklQX0xJU1RfVVJMID0gc2VydmVyQmFzZSArICd0cmlwLWxpc3QnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRNYXAoKSB7XHJcbiAgdmFyIGxhc3RJdGVtO1xyXG4gICQuZ2V0SlNPTihUUklQX0xJU1RfVVJMLCBmdW5jdGlvbiAoaXRlbXMpIHtcclxuXHJcbiAgICBsYXN0SXRlbSA9IGl0ZW1zWzBdO1xyXG4gICAgY29uc29sZS5sb2cobGFzdEl0ZW0ubG9jYXRpb24pO1xyXG4gIH0pLnRoZW4oKGxhc3RJdGVtKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhsYXN0SXRlbVswXS5sb2NhdGlvbik7XHJcbiAgICBheGlvcy5nZXQoJ2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24nLCB7XHJcbiAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICBhZGRyZXNzOiBsYXN0SXRlbVswXS5sb2NhdGlvbixcclxuICAgICAgICAgIGtleTogJ0FJemFTeURxS1lDSTFYaFhMZXo2OG5aa2k3NVU0Tml6eDBBdTZ2OCdcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKFxyXG4gICAgICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgZ2VvY29kZUFkZHJlc3MocmVzcG9uc2UpXHJcbiAgICAgICAgfSlcclxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHZhciBtYXA7XHJcbmV4cG9ydCBmdW5jdGlvbiBnZW9jb2RlQWRkcmVzcyhyZXNwb25zZSkge1xyXG5cclxuICAvLyBMb2cgZnVsbCByZXNwb25zZVxyXG4gIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuXHJcbiAgLy8gRm9ybWF0dGVkIEFkZHJlc3NcclxuICB2YXIgZm9ybWF0dGVkQWRkcmVzcyA9IHJlc3BvbnNlLmRhdGEucmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcztcclxuXHJcbiAgLy8gR2VvbWV0cnlcclxuICB2YXIgbGF0ID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdDtcclxuICB2YXIgbG5nID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxuZztcclxuXHJcbiAgY29uc29sZS5sb2cobGF0KTtcclxuICBjb25zb2xlLmxvZyhsbmcpO1xyXG4gIGNvbnNvbGUubG9nKGZvcm1hdHRlZEFkZHJlc3MpO1xyXG4gIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICBjZW50ZXI6IHtcclxuICAgICAgbGF0OiBOdW1iZXIobGF0KSxcclxuICAgICAgbG5nOiBOdW1iZXIobG5nKVxyXG4gICAgfSxcclxuICAgIHpvb206IDEyXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29yZHNPZlBsYWNlKHBsYWNlKSB7XHJcbiAgcmV0dXJuIGF4aW9zLmdldCgnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbicsIHtcclxuICAgIHBhcmFtczoge1xyXG4gICAgICBhZGRyZXNzOiBwbGFjZSxcclxuICAgICAga2V5OiAnQUl6YVN5RHFLWUNJMVhoWExlejY4blpraTc1VTROaXp4MEF1NnY4J1xyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UGxhY2VPbk1hcChpdGVtUGxhY2UpIHtcclxuXHJcbiAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgcG9zaXRpb246IHtcclxuICAgICAgbGF0OiBOdW1iZXIoaXRlbVBsYWNlLmxhdCksXHJcbiAgICAgIGxuZzogTnVtYmVyKGl0ZW1QbGFjZS5sbmcpXHJcbiAgICB9LFxyXG4gICAgbWFwOiBtYXAsXHJcbiAgICBpY29uOiAnaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvZXhhbXBsZXMvZnVsbC9pbWFnZXMvYmVhY2hmbGFnLnBuZydcclxuICB9KTtcclxufSIsIlwidXNlIHN0cmljdFwiO1xyXG5leHBvcnRzLkRBVEFCQVNFX1VSTCA9XHJcbiAgcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIHx8ICdtb25nb2RiOi8vdHJpcHVzZXI6UGFzd3dvcmQxQGRzMjUxMTEyLm1sYWIuY29tOjUxMTEyL3RyaXBzJztcclxuZXhwb3J0cy5URVNUX0RBVEFCQVNFX1VSTCA9XHJcbiAgcHJvY2Vzcy5lbnYuVEVTVF9EQVRBQkFTRV9VUkwgfHwgXCJtb25nb2RiOi8vbG9jYWxob3N0L3Rlc3QtdHJpcFwiO1xyXG5leHBvcnRzLlBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDgwODA7XHJcblxyXG5leHBvcnRzLnNlcnZlckJhc2UgPSAnaHR0cHM6Ly9taWdodHktd2lsZHdvb2QtNjI0NzMuaGVyb2t1YXBwLmNvbS8nOyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iXSwic291cmNlUm9vdCI6IiJ9