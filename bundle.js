!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=1)}([function(t,e,n){"use strict";(function(t){e.DATABASE_URL=t.env.DATABASE_URL||"mongodb://tripuser:Paswword1@ds251112.mlab.com:51112/trips",e.TEST_DATABASE_URL=t.env.TEST_DATABASE_URL||"mongodb://localhost/test-trip",e.PORT=t.env.PORT||8080,e.serverBase="https://mighty-wildwood-62473.herokuapp.com/"}).call(this,n(4))},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.selectedId=void 0,e.convertDateIntoMongoDB=w,e.convertDateFromMongoDB=h,e.showPlaces=D;var o,i=n(3),a=e.selectedId=void 0,r=n(0).serverBase+p()+"/trip-list",c='<li class="js-trip-item">\n      <div class="trip-title">\n        <p><span class="trip-item-name js-trip-item-name"></span></p>\n        <p><span class="trip-item-location js-trip-item-location"></span></p>\n        <p><span class="trip-item-dates js-trip-item-dates"></span></p>\n      </div>\n\n      <div class="trip-controls">\n\n\n        <button title="View comments" class="trip-item-view js-trip-item-view">\n          <img src="img/view.png" />\n        </button>\n\n        <button  title="Add place" class="trip-item-add">\n          <img src="img/add.png" />\n        </button>\n\n        <button  title="Edit" class="trip-item-edit js-trip-item-edit">\n          <img src="img/edit.png" />\n        </button>\n\n        <button  title="Delete" class="trip-item-delete js-trip-item-delete">\n          <img src="img/delete.png" />\n        </button>\n\n      <div>\n     \n    </li>';function p(){var t=window.location.search.split("=");return $.getJSON(r,function(t){0!==t.length?y(t[0].location):($(".popup-overlay-new-trip, .popup-content-new-trip").addClass("active"),$(".box-parent").addClass("inactive"))}),t[1],t[1]}function l(){console.log("Retrieving trip list"),$.getJSON(r,function(t){console.log("Rendering trip list"),console.log(t);var e=t.map(function(t){console.log(t);var e=$(c);e.attr("id",t.id),e.find(".js-trip-item-name").text(t.name),e.find(".js-trip-item-location").text(t.location);var n=e.find(".js-trip-item-dates"),o=h(t.tripDates);return n.text(o),e});$(".js-trip-list").html(e)})}function s(t){$.ajax({method:"POST",url:r,data:JSON.stringify(t),success:function(){l()},dataType:"json",contentType:"application/json"}).then(function(){console.log("Adding trip: "+t),l(),y(t.location),$.getJSON(r,function(t){e.selectedId=a=t[0].id}),$(".popup-overlay-new-trip, .popup-content-new-trip").removeClass("active"),$(".box-parent").removeClass("inactive"),$("#js-new-name").val(""),$("#js-new-location").val(""),$("#js-new-textArea").val(""),$("#js-new-dates").val("")}).then(function(){$(".popup-overlay-view-addPlaceForm, .popup-content-view-addPlaceForm").addClass("active"),$(".box-parent").addClass("inactive"),$(".popup-content-view-addPlaceForm").html('        \n    <h3>Please, add place you have visited </h3>\n    <div class="addPlaceForm-controls">\n  \n    <button class="button js-trip-item-addPlace">\n      Add\n    </button>\n  \n    <button class="button js-trip-item-skipAddTrip">\n       Skip\n    </button>\n  \n  <div>\n')})}function u(){$("#js-trip-item-add").on("click",function(){$(".popup-overlay-new-trip, .popup-content-new-trip").addClass("active"),$(".box-parent").addClass("inactive")}),$("#js-add-trip-form").submit(function(t){t.preventDefault();var e=function(t){return{name:$(t.currentTarget).find("#js-new-name").val(),location:$(t.currentTarget).find("#js-new-location").val(),content:$(t.currentTarget).find("#js-new-textArea").val(),tripDates:$(t.currentTarget).find("#js-new-dates").val()}}(t);e.tripDates=w(e.tripDates),s(e)})}function d(){$("main").on("click",".js-trip-item-delete",function(t){t.preventDefault(),function(t){console.log("Deleting trip `"+t+"`"),$.ajax({url:r+"/"+t,method:"DELETE",success:l})}($(t.currentTarget).closest(".js-trip-item").attr("id"))}),$.getJSON(r,function(t){0!==t.length&&y(t[0].location)})}function v(){$(".popup-content-add-place").html('        \n  <form id="js-add-place-form">\n  <label for="js-add-place-form"><span> <h4>Please add place you have visited in '+o+' </h4> </span></label>\n  <input type="text" name="js-trip-place-name" id="js-place-name" placeholder="Golden Gate Bridge, San Francisco ...." required><br>\n  \n  <button type="submit" class="button" id="addPlace">\n    Add\n  </button>\n  \n  <button class="button js-trip-addPlace-close">\n    Cancel\n  </button>\n\n  </form>\n')}console.log("USERID: ",p());var f=function(t){return function(e){var n=e.data.results[0].geometry.location.lat,o=e.data.results[0].geometry.location.lng,c={name:t,lat:n,lng:o};$.ajax({method:"POST",url:r+"/"+a+"/places",data:JSON.stringify(c),success:function(){l()},dataType:"json",contentType:"application/json"}),(0,i.displayPlaceOnMap)(c),$(".popup-overlay-add-place, .popup-content-add-place").removeClass("active"),$(".popup-overlay-view-oneMorePlace, .popup-content-view-oneMorePlace").addClass("active"),$(".popup-content-view-oneMorePlace").html('        \n    <div id="js-add-oneMorePlace">\n\n    <h2>Add one more place?</h2>\n    \n    <button type="submit" class= "button" id="addOneMorePlace">\n      Yes\n    </button>\n    \n    <button class="button js-trip-addOneMorePlace-cancel">\n      No\n    </button>\n\n    </div>\n    ')}};function m(){$("main").on("click",".js-trip-item-view",function(t){t.preventDefault(),$(".popup-overlay-view-fullTrip, .popup-content-view-fullTrip").addClass("active"),$(".box-parent").addClass("inactive");var e=$(t.currentTarget).closest(".js-trip-item");$.getJSON(r,function(t){!function(t){$(".popup-content-view-fullTrip").html('        \n  <div id="full-trip-view">\n    <p><span class="trip-item js-full-trip-content"></span>'+t.content+'</p>\n  </div>\n  <div class="full-trip-controls">\n  <button class="button js-trip-item-editcontent">\n    Edit\n  </button>\n  <button class="button js-trip-item-close">\n    Cancel\n  </button>\n<div>\n')}(t.find(function(t){return t.id===e.attr("id")}))})})}function g(){$("main").on("click",".js-trip-item-editcontent",function(t){t.preventDefault(),$.getJSON(r,function(t){var e=t.find(function(t){return t.id===a});!function(t){$("#js-upd-content-form").find("#js-upd-textArea").val(t.content),$(".popup-overlay-view-fullTrip, .popup-content-view-fullTrip").removeClass("active"),$(".popup-overlay-view-content, .popup-content-view-content").addClass("active"),$(".box-parent").addClass("inactive")}(e),function(t){$("#js-upd-content-form").on("click","#updatecontent",function(e){e.preventDefault();var n={id:t.id,name:t.name,location:t.location,content:$("#js-upd-content-form").find("textarea").val(),tripDates:t.tripdates};console.log(r+"/"+n.id),console.log("Updating trip item `"+n.id+"`"),console.log(n),a===n.id&&(b(n),$(".popup-overlay-view-content, .popup-content-view-content").removeClass("active"),$(".box-parent").removeClass("inactive"))})}(e)})})}function j(){$("main").on("click",".js-trip-item-edit",function(t){t.preventDefault(),$.getJSON(r,function(t){!function(t){$("#js-upd-trip-form").find("#js-upd-name").val(t.name),$("#js-upd-trip-form").find("#js-upd-location").val(t.location),$("#js-upd-trip-form").find("#js-upd-textArea").val(t.content);var e=h(t.tripDates);$("#js-upd-trip-form").find("#js-upd-dates").val(e),$(".popup-overlay-upd-trip, .popup-content-upd-trip").addClass("active"),$(".box-parent").addClass("inactive")}(t.find(function(t){return t.id===a}))}),function(t){$("#js-upd-trip-form").on("click","#updatetrip",function(e){e.preventDefault();var n={id:t,name:$("#js-upd-trip-form").find('input[name="js-upd-trip-form-name"]').val(),location:$("#js-upd-trip-form").find('input[name="js-upd-trip-form-location"]').val(),tripDates:$("#js-upd-trip-form").find('input[name="js-upd-trip-form-dates"]').val()};console.log(n.content);var o=n.tripDates;n.tripDates=w(o),console.log(r+"/"+n.id),console.log("Updating trip item `"+n.id+"`"),a===n.id&&b(n)})}(a)})}function b(t){$.ajax({url:r+"/"+t.id,method:"PUT",data:JSON.stringify(t),success:function(t){l()},dataType:"json",contentType:"application/json"}).then(function(){$(".popup-overlay-upd-trip, .popup-content-upd-trip").removeClass("active"),$(".box-parent").removeClass("inactive"),$("#js-upd-name").val(""),$("#js-upd-location").val(""),$("#js-upd-textArea").val(""),$("#js-upd-dates").val("")}).then(function(){console.log("Updating trip list: "+t),l();var e=t.tripDates.startDate+"/"+t.tripDates.endDate;t.tripDates=h(e)})}function y(t){axios.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t,key:"AIzaSyBpvjt5zBq23Wu6eZHvVuAHEjxd1GgDbMg"}}).then(function(t){(0,i.geocodeAddress)(t)}).catch(function(t){console.log(t)})}function w(t){var e=t.split("-"),n=new Date(e[0]),o=new Date(e[1]),i={startDate:{type:Date,required:!0},endDate:{type:Date,required:!0}};return i.startDate=n,i.endDate=o,i}function h(t){var e=t.split("/"),n=new Date(e[0]),o=new Date(e[1]);return n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear()+" - "+(o.getMonth()+1+"/"+o.getDate()+"/"+o.getFullYear())}function D(t){$.getJSON(r,function(e){for(var n=e.find(function(e){return e.id===t}),o=0;o<n.places.length;o++)(0,i.displayPlaceOnMap)(n.places[o])})}window.saveAndRenderMarker=f,window.initMap=i.initMap,$(function(){l(),d(),function(){var t;$("main").on("click",".trip-title",function(n){n.preventDefault();var i=$(n.currentTarget).closest(".js-trip-item");if(e.selectedId=a=i.attr("id"),D(a),t)t!==r&&(t.find(".trip-controls").removeClass("active"),r=$(n.currentTarget).closest(".js-trip-item"),o=r.find(".js-trip-item-location").text(),r.find(".trip-controls").addClass("active"),y(o),t=r);else{var r=$(n.currentTarget).closest(".js-trip-item");o=r.find(".js-trip-item-location").text(),r.find(".trip-controls").addClass("active"),y(o),t=r}})}(),u(),j(),$("main").on("click",".js-trip-item-addPlace, .trip-item-add",function(t){t.preventDefault(),$(".popup-overlay-view-addPlaceForm, .popup-content-view-addPlaceForm").removeClass("active"),$(".popup-overlay-add-place, .popup-content-add-place").addClass("active"),$(".box-parent").addClass("inactive"),v()}),m(),$("main").on("click",".js-trip-item-close",function(t){t.preventDefault(),$(".popup-overlay-view-fullTrip, .popup-content-view-fullTrip").removeClass("active"),$(".box-parent").removeClass("inactive")}),$("main").on("click",".js-trip-upd-close",function(t){t.preventDefault(),$(".popup-overlay-view-content, .popup-content-view-content").removeClass("active"),$(".popup-overlay-upd-trip, .popup-content-upd-trip").removeClass("active"),$(".box-parent").removeClass("inactive")}),$("main").on("click",".js-trip-addPlace-close",function(t){t.preventDefault(),$(".popup-overlay-add-place, .popup-content-add-place").removeClass("active"),$(".box-parent").removeClass("inactive")}),$("main").on("click","#addPlace",function(t){t.preventDefault();var e=$("#js-add-place-form").find('input[name="js-trip-place-name"]').val();(0,i.getCoordsOfPlace)(e).then(f(e)).catch(function(t){console.log(t)})}),$("main").on("click",".js-trip-item-skipAddTrip",function(t){$(".popup-overlay-view-addPlaceForm, .popup-content-view-addPlaceForm").removeClass("active"),$(".box-parent").removeClass("inactive")}),$("main").on("click","#addOneMorePlace",function(t){t.preventDefault(),$(".popup-overlay-view-oneMorePlace, .popup-content-view-oneMorePlace").removeClass("active"),$(".popup-overlay-add-place, .popup-content-add-place").addClass("active"),$("#js-place-name").val("")}),v(),$("main").on("click",".js-trip-addOneMorePlace-cancel",function(t){t.preventDefault(),$(".popup-overlay-view-oneMorePlace, .popup-content-view-oneMorePlace").removeClass("active"),$(".box-parent").removeClass("inactive")}),g(),$("main").on("click",".canceltrip",function(t){t.preventDefault(),$(".popup-overlay-new-trip, .popup-content-new-trip").removeClass("active"),$(".box-parent").removeClass("inactive")})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initMap=function(){var t;$.getJSON(o,function(e){t=e[0],console.log(t.location)}).then(function(t){console.log(t[0].location),axios.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t[0].location,key:"AIzaSyBpvjt5zBq23Wu6eZHvVuAHEjxd1GgDbMg"}}).then(function(t){a(t)}).catch(function(t){console.log(t)})})},e.geocodeAddress=a,e.getCoordsOfPlace=function(t){return axios.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t,key:"AIzaSyBpvjt5zBq23Wu6eZHvVuAHEjxd1GgDbMg"}})},e.displayPlaceOnMap=function(t){new google.maps.Marker({position:{lat:Number(t.lat),lng:Number(t.lng)},map:i,icon:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png"})};var o=n(0).serverBase+"trip-list";var i=e.map=void 0;function a(t){console.log(t);var n=t.data.results[0].formatted_address,o=t.data.results[0].geometry.location.lat,a=t.data.results[0].geometry.location.lng;console.log(o),console.log(a),console.log(n),e.map=i=new google.maps.Map(document.getElementById("map"),{center:{lat:Number(o),lng:Number(a)},zoom:12})}},function(t,e){var n,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{o="function"==typeof clearTimeout?clearTimeout:r}catch(t){o=r}}();var p,l=[],s=!1,u=-1;function d(){s&&p&&(s=!1,p.length?l=p.concat(l):u=-1,l.length&&v())}function v(){if(!s){var t=c(d);s=!0;for(var e=l.length;e;){for(p=l,l=[];++u<e;)p&&p[u].run();u=-1,e=l.length}p=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||s||c(v)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vY29uZmlnLmpzIiwid2VicGFjazovLy8uL2NsaWVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9jbGllbnQvZ29vZ2xlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJEQVRBQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiVEVTVF9EQVRBQkFTRV9VUkwiLCJQT1JUIiwic2VydmVyQmFzZSIsImNvbnZlcnREYXRlSW50b01vbmdvREIiLCJjb252ZXJ0RGF0ZUZyb21Nb25nb0RCIiwic2hvd1BsYWNlcyIsImxvY2F0aW9uIiwiX2dvb2dsZSIsInNlbGVjdGVkSWQiLCJUUklQX0xJU1RfVVJMIiwiZ2V0VXNlcklkIiwidHJpcEl0ZW1UZW1wbGF0ZSIsImFycmF5Iiwid2luZG93Iiwic2VhcmNoIiwic3BsaXQiLCIkIiwiZ2V0SlNPTiIsIml0ZW1zIiwibGVuZ3RoIiwicmVuZGVyU2VsZWN0ZWRNYXAiLCJhZGRDbGFzcyIsImdldEFuZERpc3BsYXlUcmlwTGlzdCIsImNvbnNvbGUiLCJsb2ciLCJpdGVtRWxlbWVudHMiLCJtYXAiLCJpdGVtIiwiZWxlbWVudCIsImF0dHIiLCJpZCIsImZpbmQiLCJ0ZXh0IiwiaXRlbVRyaXBEYXRlcyIsImNvbnZlcnRlZEl0ZW1UcmlwRGF0ZXMiLCJ0cmlwRGF0ZXMiLCJodG1sIiwiYWRkVHJpcEl0ZW0iLCJhamF4IiwibWV0aG9kIiwidXJsIiwiZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdWNjZXNzIiwiZGF0YVR5cGUiLCJjb250ZW50VHlwZSIsInRoZW4iLCJyZW1vdmVDbGFzcyIsInZhbCIsImhhbmRsZVRyaXBMaXN0QWRkIiwib24iLCJzdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJjdXJyZW50VGFyZ2V0IiwiY29udGVudCIsImdldFRyaXBGb3JtRGV0YWlscyIsImhhbmRsZVRyaXBEZWxldGUiLCJ0cmlwSWQiLCJkZWxldGV0cmlwIiwiY2xvc2VzdCIsImFkZFBsYWNlRm9ybSIsInNhdmVBbmRSZW5kZXJNYXJrZXIiLCJwbGFjZSIsInJlc3BvbnNlIiwibGF0IiwicmVzdWx0cyIsImdlb21ldHJ5IiwibG5nIiwiaXRlbVBsYWNlIiwiZGlzcGxheVBsYWNlT25NYXAiLCJoYWRsZVZpZXdUcmlwIiwidXBkYXRlVmlld0Z1bGxUcmlwIiwiaGFuZGxlQ29udGVudEVkaXQiLCJnZXRDb250ZW50Rm9ybVdpdGhEZXRhaWxzIiwibmV3SXRlbSIsInRyaXBkYXRlcyIsInJ1bkFqYXgiLCJzYXZlVXBkYXRlZENvbnRlbnQiLCJoYW5kbGVUcmlwRWRpdCIsImNvbnZlcnRlZFRyaXBEYXRlcyIsImdldFRyaXBGb3JtV2l0aERldGFpbHMiLCJtb25nb0Zvcm1hdERhdGUiLCJzYXZlVXBkYXRlZFRyaXAiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiYXhpb3MiLCJwYXJhbXMiLCJhZGRyZXNzIiwiZ2VvY29kZUFkZHJlc3MiLCJjYXRjaCIsImVycm9yIiwiRGF0ZSIsInR5cGUiLCJyZXF1aXJlZCIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwicGxhY2VzIiwiaW5pdE1hcCIsInByZXZFbGVtZW50IiwiY3VycmVudEVsZW1lbnQiLCJoYW5kbGVTZWxlY3RUcmlwIiwiZ2V0Q29vcmRzT2ZQbGFjZSIsImxhc3RJdGVtIiwiZ29vZ2xlIiwibWFwcyIsIk1hcmtlciIsInBvc2l0aW9uIiwiTnVtYmVyIiwiaWNvbiIsImZvcm1hdHRlZEFkZHJlc3MiLCJmb3JtYXR0ZWRfYWRkcmVzcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjZW50ZXIiLCJ6b29tIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwic2V0VGltZW91dCIsInRoaXMiLCJjbGVhclRpbWVvdXQiLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImNvbmNhdCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsIm5vb3AiLCJuZXh0VGljayIsImFyZ3MiLCJBcnJheSIsImFyZ3VtZW50cyIsInB1c2giLCJhcHBseSIsInRpdGxlIiwiYnJvd3NlciIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZ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SCxHQUNBUCxFQUFBVyxJQVNBTSxFQUFBcEosVUFBQWlKLElBQUEsV0FDQVgsS0FBQUYsSUFBQXVCLE1BQUEsS0FBQXJCLEtBQUFuSCxRQUVBZCxFQUFBdUosTUFBQSxVQUNBdkosRUFBQXdKLFNBQUEsRUFDQXhKLEVBQUFDLE9BQ0FELEVBQUF5SixRQUNBekosRUFBQTBKLFFBQUEsR0FDQTFKLEVBQUEySixZQUlBM0osRUFBQXFELEdBQUEyRixFQUNBaEosRUFBQTRKLFlBQUFaLEVBQ0FoSixFQUFBNkosS0FBQWIsRUFDQWhKLEVBQUE4SixJQUFBZCxFQUNBaEosRUFBQStKLGVBQUFmLEVBQ0FoSixFQUFBZ0ssbUJBQUFoQixFQUNBaEosRUFBQWlLLEtBQUFqQixFQUNBaEosRUFBQWtLLGdCQUFBbEIsRUFDQWhKLEVBQUFtSyxvQkFBQW5CLEVBRUFoSixFQUFBb0ssVUFBQSxTQUFBOUwsR0FBcUMsVUFFckMwQixFQUFBcUssUUFBQSxTQUFBL0wsR0FDQSxVQUFBc0osTUFBQSxxQ0FHQTVILEVBQUFzSyxJQUFBLFdBQTJCLFdBQzNCdEssRUFBQXVLLE1BQUEsU0FBQUMsR0FDQSxVQUFBNUMsTUFBQSxtQ0FFQTVILEVBQUF5SyxNQUFBLFdBQTRCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuZXhwb3J0cy5EQVRBQkFTRV9VUkwgPVxyXG4gIHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCB8fCAnbW9uZ29kYjovL3RyaXB1c2VyOlBhc3d3b3JkMUBkczI1MTExMi5tbGFiLmNvbTo1MTExMi90cmlwcyc7XHJcbmV4cG9ydHMuVEVTVF9EQVRBQkFTRV9VUkwgPVxyXG4gIHByb2Nlc3MuZW52LlRFU1RfREFUQUJBU0VfVVJMIHx8IFwibW9uZ29kYjovL2xvY2FsaG9zdC90ZXN0LXRyaXBcIjtcclxuZXhwb3J0cy5QT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA4MDgwO1xyXG5cclxuZXhwb3J0cy5zZXJ2ZXJCYXNlID0gJ2h0dHBzOi8vbWlnaHR5LXdpbGR3b29kLTYyNDczLmhlcm9rdWFwcC5jb20vJzsiLCJpbXBvcnQge1xyXG4gIGluaXRNYXAsXHJcbiAgZ2VvY29kZUFkZHJlc3MsXHJcbiAgZ2V0Q29vcmRzT2ZQbGFjZSxcclxuICBkaXNwbGF5UGxhY2VPbk1hcFxyXG59IGZyb20gJy4vZ29vZ2xlJ1xyXG5cclxuXHJcblxyXG5leHBvcnQgdmFyIHNlbGVjdGVkSWQ7XHJcbnZhciBsb2NhdGlvbjtcclxudmFyIHVzZXJJZDtcclxuXHJcbmNvbnN0IHsgc2VydmVyQmFzZSB9ID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XHJcbnZhciBUUklQX0xJU1RfVVJMID0gc2VydmVyQmFzZSArIGdldFVzZXJJZCgpICsgJy90cmlwLWxpc3QnO1xyXG5cclxuLy9UZW1wbGF0ZSBmb3IgdHJpcCBpdGVtLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG52YXIgdHJpcEl0ZW1UZW1wbGF0ZSA9IChcclxuICBgPGxpIGNsYXNzPVwianMtdHJpcC1pdGVtXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ0cmlwLXRpdGxlXCI+XHJcbiAgICAgICAgPHA+PHNwYW4gY2xhc3M9XCJ0cmlwLWl0ZW0tbmFtZSBqcy10cmlwLWl0ZW0tbmFtZVwiPjwvc3Bhbj48L3A+XHJcbiAgICAgICAgPHA+PHNwYW4gY2xhc3M9XCJ0cmlwLWl0ZW0tbG9jYXRpb24ganMtdHJpcC1pdGVtLWxvY2F0aW9uXCI+PC9zcGFuPjwvcD5cclxuICAgICAgICA8cD48c3BhbiBjbGFzcz1cInRyaXAtaXRlbS1kYXRlcyBqcy10cmlwLWl0ZW0tZGF0ZXNcIj48L3NwYW4+PC9wPlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ0cmlwLWNvbnRyb2xzXCI+XHJcblxyXG5cclxuICAgICAgICA8YnV0dG9uIHRpdGxlPVwiVmlldyBjb21tZW50c1wiIGNsYXNzPVwidHJpcC1pdGVtLXZpZXcganMtdHJpcC1pdGVtLXZpZXdcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiaW1nL3ZpZXcucG5nXCIgLz5cclxuICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgPGJ1dHRvbiAgdGl0bGU9XCJBZGQgcGxhY2VcIiBjbGFzcz1cInRyaXAtaXRlbS1hZGRcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiaW1nL2FkZC5wbmdcIiAvPlxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICA8YnV0dG9uICB0aXRsZT1cIkVkaXRcIiBjbGFzcz1cInRyaXAtaXRlbS1lZGl0IGpzLXRyaXAtaXRlbS1lZGl0XCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cImltZy9lZGl0LnBuZ1wiIC8+XHJcbiAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgIDxidXR0b24gIHRpdGxlPVwiRGVsZXRlXCIgY2xhc3M9XCJ0cmlwLWl0ZW0tZGVsZXRlIGpzLXRyaXAtaXRlbS1kZWxldGVcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiaW1nL2RlbGV0ZS5wbmdcIiAvPlxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgPGRpdj5cclxuICAgICBcclxuICAgIDwvbGk+YFxyXG4pO1xyXG4vLy1FbmQgQmxvY2stLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuXHJcbi8vIEdldCB1c2VySWQgZnJvbSBVUkwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5mdW5jdGlvbiBnZXRVc2VySWQoKSB7XHJcbiAgY29uc3QgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XHJcbiAgdmFyIGFycmF5ID0gbG9jYXRpb24uc2VhcmNoLnNwbGl0KCc9Jyk7XHJcbiAgJC5nZXRKU09OKFRSSVBfTElTVF9VUkwsIGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgaWYoaXRlbXMubGVuZ3RoIT09MCl7XHJcbiAgICAgIHJlbmRlclNlbGVjdGVkTWFwKGl0ZW1zWzBdLmxvY2F0aW9uKTtcclxuICAgIH0gZWxzZXtcclxuICAgICAgJCgnLnBvcHVwLW92ZXJsYXktbmV3LXRyaXAsIC5wb3B1cC1jb250ZW50LW5ldy10cmlwJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICQoXCIuYm94LXBhcmVudFwiKS5hZGRDbGFzcyhcImluYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICB9KVxyXG4gIHVzZXJJZCA9IGFycmF5WzFdO1xyXG4gIHJldHVybiBhcnJheVsxXTtcclxufVxyXG5jb25zb2xlLmxvZyhcIlVTRVJJRDogXCIsIGdldFVzZXJJZCgpKTtcclxuLy8tRW5kIEJsb2NrLS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy8gTG9hZGluZyBJbml0aWFsL3VwZGF0ZWQgbGlzdCBvZiB0cmlwcy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5mdW5jdGlvbiBnZXRBbmREaXNwbGF5VHJpcExpc3QoKSB7XHJcbiAgY29uc29sZS5sb2coJ1JldHJpZXZpbmcgdHJpcCBsaXN0Jyk7XHJcbiAgJC5nZXRKU09OKFRSSVBfTElTVF9VUkwsIGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgY29uc29sZS5sb2coJ1JlbmRlcmluZyB0cmlwIGxpc3QnKTtcclxuICAgIGNvbnNvbGUubG9nKGl0ZW1zKTtcclxuICAgIHZhciBpdGVtRWxlbWVudHMgPSBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xyXG5cclxuICAgICAgdmFyIGVsZW1lbnQgPSAkKHRyaXBJdGVtVGVtcGxhdGUpO1xyXG4gICAgICBlbGVtZW50LmF0dHIoJ2lkJywgaXRlbS5pZCk7XHJcblxyXG4gICAgICB2YXIgaXRlbU5hbWUgPSBlbGVtZW50LmZpbmQoJy5qcy10cmlwLWl0ZW0tbmFtZScpO1xyXG4gICAgICBpdGVtTmFtZS50ZXh0KGl0ZW0ubmFtZSk7XHJcblxyXG4gICAgICB2YXIgaXRlbUxvY2F0aW9uID0gZWxlbWVudC5maW5kKCcuanMtdHJpcC1pdGVtLWxvY2F0aW9uJyk7XHJcbiAgICAgIGl0ZW1Mb2NhdGlvbi50ZXh0KGl0ZW0ubG9jYXRpb24pO1xyXG5cclxuICAgICAgdmFyIGl0ZW1UcmlwRGF0ZXMgPSBlbGVtZW50LmZpbmQoJy5qcy10cmlwLWl0ZW0tZGF0ZXMnKTtcclxuICAgICAgdmFyIGNvbnZlcnRlZEl0ZW1UcmlwRGF0ZXMgPSBjb252ZXJ0RGF0ZUZyb21Nb25nb0RCKGl0ZW0udHJpcERhdGVzKTtcclxuICAgICAgaXRlbVRyaXBEYXRlcy50ZXh0KGNvbnZlcnRlZEl0ZW1UcmlwRGF0ZXMpO1xyXG4gICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5qcy10cmlwLWxpc3QnKS5odG1sKGl0ZW1FbGVtZW50cyk7XHJcbiAgICBcclxuICB9KTtcclxufVxyXG4vLy1FbmQgQmxvY2stLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vL0FkZGluZyBuZXcgdHJpcCBpdGVtLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDbG9zZU5ld1RyaXBGb3JtKCkge1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLmNhbmNlbHRyaXAnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJChcIi5wb3B1cC1vdmVybGF5LW5ldy10cmlwLCAucG9wdXAtY29udGVudC1uZXctdHJpcFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoXCIuYm94LXBhcmVudFwiKS5yZW1vdmVDbGFzcyhcImluYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJUcmlwRm9ybSgpIHtcclxuICAkKCcjanMtdHJpcC1pdGVtLWFkZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICQoJy5wb3B1cC1vdmVybGF5LW5ldy10cmlwLCAucG9wdXAtY29udGVudC1uZXctdHJpcCcpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJChcIi5ib3gtcGFyZW50XCIpLmFkZENsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFRyaXBJdGVtKGl0ZW0pIHtcclxuICAkLmFqYXgoe1xyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIHVybDogVFJJUF9MSVNUX1VSTCxcclxuICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGl0ZW0pLFxyXG4gICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICBnZXRBbmREaXNwbGF5VHJpcExpc3QoKTtcclxuICAgIH0sXHJcbiAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICB9KS50aGVuKCgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwiQWRkaW5nIHRyaXA6IFwiICsgaXRlbSk7XHJcbiAgICBnZXRBbmREaXNwbGF5VHJpcExpc3QoKTtcclxuICAgIHJlbmRlclNlbGVjdGVkTWFwKGl0ZW0ubG9jYXRpb24pO1xyXG5cclxuICAgICQuZ2V0SlNPTihUUklQX0xJU1RfVVJMLCBmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgICAgc2VsZWN0ZWRJZCA9IGl0ZW1zWzBdLmlkO1xyXG4gICAgfSlcclxuICAgICQoXCIucG9wdXAtb3ZlcmxheS1uZXctdHJpcCwgLnBvcHVwLWNvbnRlbnQtbmV3LXRyaXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKFwiLmJveC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuXHJcbiAgICAkKCcjanMtbmV3LW5hbWUnKS52YWwoJycpO1xyXG4gICAgJCgnI2pzLW5ldy1sb2NhdGlvbicpLnZhbCgnJyk7XHJcbiAgICAkKCcjanMtbmV3LXRleHRBcmVhJykudmFsKCcnKTtcclxuICAgICQoJyNqcy1uZXctZGF0ZXMnKS52YWwoJycpO1xyXG4gIH0pLnRoZW4oKCk9PnsgICBcclxuICAgICQoJy5wb3B1cC1vdmVybGF5LXZpZXctYWRkUGxhY2VGb3JtLCAucG9wdXAtY29udGVudC12aWV3LWFkZFBsYWNlRm9ybScpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJChcIi5ib3gtcGFyZW50XCIpLmFkZENsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgICByZW5kZXJBZGRQbGFjZUZvcm0oKTtcclxuICB9KTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVRyaXBMaXN0QWRkKCkge1xyXG4gIHJlbmRlclRyaXBGb3JtKCk7XHJcbiAgJChcIiNqcy1hZGQtdHJpcC1mb3JtXCIpLnN1Ym1pdChmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgaXRlbSA9IGdldFRyaXBGb3JtRGV0YWlscyhlKTtcclxuICAgIGl0ZW0udHJpcERhdGVzID0gY29udmVydERhdGVJbnRvTW9uZ29EQihpdGVtLnRyaXBEYXRlcyk7XHJcbiAgICBhZGRUcmlwSXRlbShpdGVtKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VHJpcEZvcm1EZXRhaWxzKGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgbmFtZTogJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJyNqcy1uZXctbmFtZScpLnZhbCgpLFxyXG4gICAgbG9jYXRpb246ICQoZS5jdXJyZW50VGFyZ2V0KS5maW5kKCcjanMtbmV3LWxvY2F0aW9uJykudmFsKCksXHJcbiAgICBjb250ZW50OiAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnI2pzLW5ldy10ZXh0QXJlYScpLnZhbCgpLFxyXG4gICAgdHJpcERhdGVzOiAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnI2pzLW5ldy1kYXRlcycpLnZhbCgpXHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlbmRlckFkZFBsYWNlRm9ybSgpe1xyXG4gICQoJy5wb3B1cC1jb250ZW50LXZpZXctYWRkUGxhY2VGb3JtJykuaHRtbChgICAgICAgICBcclxuICAgIDxoMz5QbGVhc2UsIGFkZCBwbGFjZSB5b3UgaGF2ZSB2aXNpdGVkIDwvaDM+XHJcbiAgICA8ZGl2IGNsYXNzPVwiYWRkUGxhY2VGb3JtLWNvbnRyb2xzXCI+XHJcbiAgXHJcbiAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGpzLXRyaXAtaXRlbS1hZGRQbGFjZVwiPlxyXG4gICAgICBBZGRcclxuICAgIDwvYnV0dG9uPlxyXG4gIFxyXG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBqcy10cmlwLWl0ZW0tc2tpcEFkZFRyaXBcIj5cclxuICAgICAgIFNraXBcclxuICAgIDwvYnV0dG9uPlxyXG4gIFxyXG4gIDxkaXY+XHJcbmApO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVNraXBBZGRQbGFjZUZvcm0oKSB7XHJcbiAgJCgnbWFpbicpLm9uKCdjbGljaycsICcuanMtdHJpcC1pdGVtLXNraXBBZGRUcmlwJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICQoXCIucG9wdXAtb3ZlcmxheS12aWV3LWFkZFBsYWNlRm9ybSwgLnBvcHVwLWNvbnRlbnQtdmlldy1hZGRQbGFjZUZvcm1cIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKFwiLmJveC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuICB9KTtcclxufVxyXG4vLy1FbmQgQmxvY2stLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vL0RlbGV0ZSB0cmlwIGl0ZW0vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZnVuY3Rpb24gZGVsZXRldHJpcCh0cmlwSWQpIHtcclxuICBjb25zb2xlLmxvZygnRGVsZXRpbmcgdHJpcCBgJyArIHRyaXBJZCArICdgJyk7XHJcbiAgJC5hamF4KHtcclxuICAgIHVybDogVFJJUF9MSVNUX1VSTCArICcvJyArIHRyaXBJZCxcclxuICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICBzdWNjZXNzOiBnZXRBbmREaXNwbGF5VHJpcExpc3RcclxuICB9KTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVRyaXBEZWxldGUoKSB7XHJcbiAgJCgnbWFpbicpLm9uKCdjbGljaycsICcuanMtdHJpcC1pdGVtLWRlbGV0ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBkZWxldGV0cmlwKFxyXG4gICAgICAkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLmpzLXRyaXAtaXRlbScpLmF0dHIoJ2lkJykpO1xyXG5cclxuICB9KTtcclxuXHJcbiAgJC5nZXRKU09OKFRSSVBfTElTVF9VUkwsIGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgaWYoaXRlbXMubGVuZ3RoIT09MCl7XHJcbiAgICAgIHJlbmRlclNlbGVjdGVkTWFwKGl0ZW1zWzBdLmxvY2F0aW9uKTtcclxuICAgIH1cclxuICB9KVxyXG59XHJcbi8vLUVuZCBCbG9jay0vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8vQ3JlYXRlKGFkZCkgcGxhY2UgeW91IGhhdmUgYmVlbiB2aXNpdGVkIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5mdW5jdGlvbiBoYW5kbGVBZGRQbGFjZSgpIHtcclxuICAkKCdtYWluJykub24oJ2NsaWNrJywgJy5qcy10cmlwLWl0ZW0tYWRkUGxhY2UsIC50cmlwLWl0ZW0tYWRkJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoJy5wb3B1cC1vdmVybGF5LXZpZXctYWRkUGxhY2VGb3JtLCAucG9wdXAtY29udGVudC12aWV3LWFkZFBsYWNlRm9ybScpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJCgnLnBvcHVwLW92ZXJsYXktYWRkLXBsYWNlLCAucG9wdXAtY29udGVudC1hZGQtcGxhY2UnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoXCIuYm94LXBhcmVudFwiKS5hZGRDbGFzcyhcImluYWN0aXZlXCIpO1xyXG4gICAgYWRkUGxhY2VGb3JtKCk7XHJcbiAgfSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQbGFjZUZvcm0oKXtcclxuICAkKCcucG9wdXAtY29udGVudC1hZGQtcGxhY2UnKS5odG1sKGAgICAgICAgIFxyXG4gIDxmb3JtIGlkPVwianMtYWRkLXBsYWNlLWZvcm1cIj5cclxuICA8bGFiZWwgZm9yPVwianMtYWRkLXBsYWNlLWZvcm1cIj48c3Bhbj4gPGg0PlBsZWFzZSBhZGQgcGxhY2UgeW91IGhhdmUgdmlzaXRlZCBpbiAke2xvY2F0aW9ufSA8L2g0PiA8L3NwYW4+PC9sYWJlbD5cclxuICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwianMtdHJpcC1wbGFjZS1uYW1lXCIgaWQ9XCJqcy1wbGFjZS1uYW1lXCIgcGxhY2Vob2xkZXI9XCJHb2xkZW4gR2F0ZSBCcmlkZ2UsIFNhbiBGcmFuY2lzY28gLi4uLlwiIHJlcXVpcmVkPjxicj5cclxuICBcclxuICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ1dHRvblwiIGlkPVwiYWRkUGxhY2VcIj5cclxuICAgIEFkZFxyXG4gIDwvYnV0dG9uPlxyXG4gIFxyXG4gIDxidXR0b24gY2xhc3M9XCJidXR0b24ganMtdHJpcC1hZGRQbGFjZS1jbG9zZVwiPlxyXG4gICAgQ2FuY2VsXHJcbiAgPC9idXR0b24+XHJcblxyXG4gIDwvZm9ybT5cclxuYCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNsb3NlQWRkUGxhY2VWaWV3KCkge1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLmpzLXRyaXAtYWRkUGxhY2UtY2xvc2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJCgnLnBvcHVwLW92ZXJsYXktYWRkLXBsYWNlLCAucG9wdXAtY29udGVudC1hZGQtcGxhY2UnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoXCIuYm94LXBhcmVudFwiKS5yZW1vdmVDbGFzcyhcImluYWN0aXZlXCIpO1xyXG5cclxuICB9KTtcclxufVxyXG5jb25zdCBzYXZlQW5kUmVuZGVyTWFya2VyID0gZnVuY3Rpb24gKHBsYWNlKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgY29uc3QgbGF0ID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdDtcclxuICAgIGNvbnN0IGxuZyA9IHJlc3BvbnNlLmRhdGEucmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbi5sbmc7XHJcblxyXG4gICAgY29uc3QgaXRlbVBsYWNlID0ge1xyXG4gICAgICBuYW1lOiBwbGFjZSxcclxuICAgICAgbGF0OiBsYXQsXHJcbiAgICAgIGxuZzogbG5nXHJcbiAgICB9XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgdXJsOiBUUklQX0xJU1RfVVJMK2AvJHtzZWxlY3RlZElkfS9wbGFjZXNgLFxyXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShpdGVtUGxhY2UpLFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZ2V0QW5kRGlzcGxheVRyaXBMaXN0KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICB9KVxyXG5cclxuICAgIGRpc3BsYXlQbGFjZU9uTWFwKGl0ZW1QbGFjZSk7XHJcbiAgICAkKCcucG9wdXAtb3ZlcmxheS1hZGQtcGxhY2UsIC5wb3B1cC1jb250ZW50LWFkZC1wbGFjZScpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJCgnLnBvcHVwLW92ZXJsYXktdmlldy1vbmVNb3JlUGxhY2UsIC5wb3B1cC1jb250ZW50LXZpZXctb25lTW9yZVBsYWNlJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKCcucG9wdXAtY29udGVudC12aWV3LW9uZU1vcmVQbGFjZScpLmh0bWwoYCAgICAgICAgXHJcbiAgICA8ZGl2IGlkPVwianMtYWRkLW9uZU1vcmVQbGFjZVwiPlxyXG5cclxuICAgIDxoMj5BZGQgb25lIG1vcmUgcGxhY2U/PC9oMj5cclxuICAgIFxyXG4gICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9IFwiYnV0dG9uXCIgaWQ9XCJhZGRPbmVNb3JlUGxhY2VcIj5cclxuICAgICAgWWVzXHJcbiAgICA8L2J1dHRvbj5cclxuICAgIFxyXG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBqcy10cmlwLWFkZE9uZU1vcmVQbGFjZS1jYW5jZWxcIj5cclxuICAgICAgTm9cclxuICAgIDwvYnV0dG9uPlxyXG5cclxuICAgIDwvZGl2PlxyXG4gICAgYCk7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkT25lTW9yZVBsYWNlKCl7XHJcbiAgJCgnbWFpbicpLm9uKCdjbGljaycsICcjYWRkT25lTW9yZVBsYWNlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoXCIucG9wdXAtb3ZlcmxheS12aWV3LW9uZU1vcmVQbGFjZSwgLnBvcHVwLWNvbnRlbnQtdmlldy1vbmVNb3JlUGxhY2VcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKCcucG9wdXAtb3ZlcmxheS1hZGQtcGxhY2UsIC5wb3B1cC1jb250ZW50LWFkZC1wbGFjZScpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJCgnI2pzLXBsYWNlLW5hbWUnKS52YWwoJycpO1xyXG4gICAgLy8kKFwiLmJveC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuICB9KTtcclxuICBhZGRQbGFjZUZvcm0oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FuY2VsQWRkT25lTW9yZVBsYWNlKCl7XHJcbiAgJCgnbWFpbicpLm9uKCdjbGljaycsICcuanMtdHJpcC1hZGRPbmVNb3JlUGxhY2UtY2FuY2VsJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoXCIucG9wdXAtb3ZlcmxheS12aWV3LW9uZU1vcmVQbGFjZSwgLnBvcHVwLWNvbnRlbnQtdmlldy1vbmVNb3JlUGxhY2VcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKFwiLmJveC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuICB9KTtcclxuXHJcbn1cclxud2luZG93LnNhdmVBbmRSZW5kZXJNYXJrZXIgPSBzYXZlQW5kUmVuZGVyTWFya2VyO1xyXG5mdW5jdGlvbiBoYW5kbGVTYXZlTmV3UGxhY2UoKSB7XHJcbiAgJCgnbWFpbicpLm9uKCdjbGljaycsICcjYWRkUGxhY2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIHBsYWNlID0gJCgnI2pzLWFkZC1wbGFjZS1mb3JtJykuZmluZCgnaW5wdXRbbmFtZT1cImpzLXRyaXAtcGxhY2UtbmFtZVwiXScpLnZhbCgpO1xyXG4gXHJcbiAgICBnZXRDb29yZHNPZlBsYWNlKHBsYWNlKVxyXG4gICAgICAudGhlbihzYXZlQW5kUmVuZGVyTWFya2VyKHBsYWNlKSlcclxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcbi8vLUVuZCBCbG9jay0vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8vIFZpZXcoZWRpdCkgdHJpcCBjb21tZW50cyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5mdW5jdGlvbiBoYWRsZVZpZXdUcmlwKCkge1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLmpzLXRyaXAtaXRlbS12aWV3JywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoJy5wb3B1cC1vdmVybGF5LXZpZXctZnVsbFRyaXAsIC5wb3B1cC1jb250ZW50LXZpZXctZnVsbFRyaXAnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoXCIuYm94LXBhcmVudFwiKS5hZGRDbGFzcyhcImluYWN0aXZlXCIpO1xyXG5cclxuICAgIHZhciBlbGVtZW50ID0gJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanMtdHJpcC1pdGVtXCIpO1xyXG4gICAgdmFyIGl0ZW07XHJcbiAgICAkLmdldEpTT04oVFJJUF9MSVNUX1VSTCwgZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgIGl0ZW0gPSBpdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gZWxlbWVudC5hdHRyKFwiaWRcIikpO1xyXG4gICAgICB1cGRhdGVWaWV3RnVsbFRyaXAoaXRlbSk7XHJcbiAgICB9KTtcclxuXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVZpZXdGdWxsVHJpcChpdGVtKSB7XHJcbiAgJCgnLnBvcHVwLWNvbnRlbnQtdmlldy1mdWxsVHJpcCcpLmh0bWwoYCAgICAgICAgXHJcbiAgPGRpdiBpZD1cImZ1bGwtdHJpcC12aWV3XCI+XHJcbiAgICA8cD48c3BhbiBjbGFzcz1cInRyaXAtaXRlbSBqcy1mdWxsLXRyaXAtY29udGVudFwiPjwvc3Bhbj4ke2l0ZW0uY29udGVudH08L3A+XHJcbiAgPC9kaXY+XHJcbiAgPGRpdiBjbGFzcz1cImZ1bGwtdHJpcC1jb250cm9sc1wiPlxyXG4gIDxidXR0b24gY2xhc3M9XCJidXR0b24ganMtdHJpcC1pdGVtLWVkaXRjb250ZW50XCI+XHJcbiAgICBFZGl0XHJcbiAgPC9idXR0b24+XHJcbiAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBqcy10cmlwLWl0ZW0tY2xvc2VcIj5cclxuICAgIENhbmNlbFxyXG4gIDwvYnV0dG9uPlxyXG48ZGl2PlxyXG5gKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ29udGVudEVkaXQoKSB7XHJcbiAgJCgnbWFpbicpLm9uKCdjbGljaycsICcuanMtdHJpcC1pdGVtLWVkaXRjb250ZW50JywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIFxyXG4gICAgJC5nZXRKU09OKFRSSVBfTElTVF9VUkwsIGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICB2YXIgaXRlbSA9IGl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBzZWxlY3RlZElkKTtcclxuICAgICAgZ2V0Q29udGVudEZvcm1XaXRoRGV0YWlscyhpdGVtKTtcclxuICAgICAgc2F2ZVVwZGF0ZWRDb250ZW50KGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfSk7ICAgIFxyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZUNsb3NlRnVsbFZpZXcoKSB7XHJcbiAgJCgnbWFpbicpLm9uKCdjbGljaycsICcuanMtdHJpcC1pdGVtLWNsb3NlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoXCIucG9wdXAtb3ZlcmxheS12aWV3LWZ1bGxUcmlwLCAucG9wdXAtY29udGVudC12aWV3LWZ1bGxUcmlwXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgJChcIi5ib3gtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgfSk7XHJcbn1cclxuLy8tRW5kIEJsb2NrLS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy8gRWRpdCB0cmlwIGl0ZW0gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5mdW5jdGlvbiBoYW5kbGVUcmlwRWRpdCgpIHtcclxuICAkKCdtYWluJykub24oJ2NsaWNrJywgJy5qcy10cmlwLWl0ZW0tZWRpdCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkLmdldEpTT04oVFJJUF9MSVNUX1VSTCwgZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgIHZhciBpdGVtID0gaXRlbXMuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IHNlbGVjdGVkSWQpO1xyXG4gICAgICBnZXRUcmlwRm9ybVdpdGhEZXRhaWxzKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgICBzYXZlVXBkYXRlZFRyaXAoc2VsZWN0ZWRJZCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRyaXBGb3JtV2l0aERldGFpbHMoaXRlbSkge1xyXG4gICQoJyNqcy11cGQtdHJpcC1mb3JtJykuZmluZCgnI2pzLXVwZC1uYW1lJykudmFsKGl0ZW0ubmFtZSk7XHJcbiAgJCgnI2pzLXVwZC10cmlwLWZvcm0nKS5maW5kKCcjanMtdXBkLWxvY2F0aW9uJykudmFsKGl0ZW0ubG9jYXRpb24pO1xyXG4gICQoJyNqcy11cGQtdHJpcC1mb3JtJykuZmluZCgnI2pzLXVwZC10ZXh0QXJlYScpLnZhbChpdGVtLmNvbnRlbnQpO1xyXG4gIHZhciBjb252ZXJ0ZWRUcmlwRGF0ZXMgPSBjb252ZXJ0RGF0ZUZyb21Nb25nb0RCKGl0ZW0udHJpcERhdGVzKTtcclxuICAkKCcjanMtdXBkLXRyaXAtZm9ybScpLmZpbmQoJyNqcy11cGQtZGF0ZXMnKS52YWwoY29udmVydGVkVHJpcERhdGVzKTtcclxuXHJcbiAgJCgnLnBvcHVwLW92ZXJsYXktdXBkLXRyaXAsIC5wb3B1cC1jb250ZW50LXVwZC10cmlwJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgJChcIi5ib3gtcGFyZW50XCIpLmFkZENsYXNzKFwiaW5hY3RpdmVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvbnRlbnRGb3JtV2l0aERldGFpbHMoaXRlbSkge1xyXG4gICQoJyNqcy11cGQtY29udGVudC1mb3JtJykuZmluZCgnI2pzLXVwZC10ZXh0QXJlYScpLnZhbChpdGVtLmNvbnRlbnQpO1xyXG4gICQoJy5wb3B1cC1vdmVybGF5LXZpZXctZnVsbFRyaXAsIC5wb3B1cC1jb250ZW50LXZpZXctZnVsbFRyaXAnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHJcbiAgJCgnLnBvcHVwLW92ZXJsYXktdmlldy1jb250ZW50LCAucG9wdXAtY29udGVudC12aWV3LWNvbnRlbnQnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAkKFwiLmJveC1wYXJlbnRcIikuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNhdmVVcGRhdGVkQ29udGVudChpdGVtKXtcclxuXHJcbiAgJChcIiNqcy11cGQtY29udGVudC1mb3JtXCIpLm9uKFwiY2xpY2tcIiwgXCIjdXBkYXRlY29udGVudFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBcclxuICAgIHZhciBuZXdJdGVtID0ge1xyXG4gICAgICBpZDogaXRlbS5pZCxcclxuICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICBsb2NhdGlvbjogaXRlbS5sb2NhdGlvbixcclxuICAgICAgY29udGVudDogJCgnI2pzLXVwZC1jb250ZW50LWZvcm0nKS5maW5kKCd0ZXh0YXJlYScpLnZhbCgpLFxyXG4gICAgICB0cmlwRGF0ZXM6IGl0ZW0udHJpcGRhdGVzXHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhUUklQX0xJU1RfVVJMICsgXCIvXCIgKyBuZXdJdGVtLmlkKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIlVwZGF0aW5nIHRyaXAgaXRlbSBgXCIgKyBuZXdJdGVtLmlkICsgXCJgXCIpO1xyXG4gICAgY29uc29sZS5sb2cobmV3SXRlbSk7XHJcblxyXG4gICAgaWYgKHNlbGVjdGVkSWQgPT09IG5ld0l0ZW0uaWQpIHtcclxuICAgICAgcnVuQWpheChuZXdJdGVtKTtcclxuICAgICAgJChcIi5wb3B1cC1vdmVybGF5LXZpZXctY29udGVudCwgLnBvcHVwLWNvbnRlbnQtdmlldy1jb250ZW50XCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAkKFwiLmJveC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhdmVVcGRhdGVkVHJpcCh0cmlwSWQpIHtcclxuICAkKFwiI2pzLXVwZC10cmlwLWZvcm1cIikub24oXCJjbGlja1wiLCBcIiN1cGRhdGV0cmlwXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgaXRlbSA9IHtcclxuICAgICAgaWQ6IHRyaXBJZCxcclxuICAgICAgbmFtZTogJCgnI2pzLXVwZC10cmlwLWZvcm0nKS5maW5kKCdpbnB1dFtuYW1lPVwianMtdXBkLXRyaXAtZm9ybS1uYW1lXCJdJykudmFsKCksXHJcbiAgICAgIGxvY2F0aW9uOiAkKCcjanMtdXBkLXRyaXAtZm9ybScpLmZpbmQoJ2lucHV0W25hbWU9XCJqcy11cGQtdHJpcC1mb3JtLWxvY2F0aW9uXCJdJykudmFsKCksXHJcbiAgICAgIHRyaXBEYXRlczogJCgnI2pzLXVwZC10cmlwLWZvcm0nKS5maW5kKCdpbnB1dFtuYW1lPVwianMtdXBkLXRyaXAtZm9ybS1kYXRlc1wiXScpLnZhbCgpLFxyXG4gICAgfTtcclxuICAgIGNvbnNvbGUubG9nKGl0ZW0uY29udGVudCk7XHJcbiAgICB2YXIgbW9uZ29Gb3JtYXREYXRlID0gaXRlbS50cmlwRGF0ZXM7XHJcbiAgICBpdGVtLnRyaXBEYXRlcyA9IGNvbnZlcnREYXRlSW50b01vbmdvREIobW9uZ29Gb3JtYXREYXRlKTtcclxuICAgIGNvbnNvbGUubG9nKFRSSVBfTElTVF9VUkwgKyBcIi9cIiArIGl0ZW0uaWQpO1xyXG4gICAgY29uc29sZS5sb2coXCJVcGRhdGluZyB0cmlwIGl0ZW0gYFwiICsgaXRlbS5pZCArIFwiYFwiKTtcclxuICAgIGlmIChzZWxlY3RlZElkID09PSBpdGVtLmlkKSB7XHJcbiAgICAgIHJ1bkFqYXgoaXRlbSk7ICBcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcnVuQWpheChpdGVtKSB7XHJcbiAgJC5hamF4KHtcclxuICAgICAgdXJsOiBUUklQX0xJU1RfVVJMICsgXCIvXCIgKyBpdGVtLmlkLFxyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGl0ZW0pLFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGdldEFuZERpc3BsYXlUcmlwTGlzdCgpO1xyXG4gICAgICB9LFxyXG4gICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgJChcIi5wb3B1cC1vdmVybGF5LXVwZC10cmlwLCAucG9wdXAtY29udGVudC11cGQtdHJpcFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgJChcIi5ib3gtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgICAgICQoJyNqcy11cGQtbmFtZScpLnZhbCgnJyk7XHJcbiAgICAgICQoJyNqcy11cGQtbG9jYXRpb24nKS52YWwoJycpO1xyXG4gICAgICAkKCcjanMtdXBkLXRleHRBcmVhJykudmFsKCcnKTtcclxuICAgICAgJCgnI2pzLXVwZC1kYXRlcycpLnZhbCgnJyk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlVwZGF0aW5nIHRyaXAgbGlzdDogXCIgKyBpdGVtKTtcclxuICAgICAgZ2V0QW5kRGlzcGxheVRyaXBMaXN0KCk7XHJcbiAgICAgIHZhciBtb25nb0Zvcm1hdERhdGUgPSBgJHtpdGVtLnRyaXBEYXRlcy5zdGFydERhdGV9LyR7aXRlbS50cmlwRGF0ZXMuZW5kRGF0ZX1gO1xyXG4gICAgICBpdGVtLnRyaXBEYXRlcyA9IGNvbnZlcnREYXRlRnJvbU1vbmdvREIobW9uZ29Gb3JtYXREYXRlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDbG9zZUVkaXRWaWV3KCkge1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLmpzLXRyaXAtdXBkLWNsb3NlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoXCIucG9wdXAtb3ZlcmxheS12aWV3LWNvbnRlbnQsIC5wb3B1cC1jb250ZW50LXZpZXctY29udGVudFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICQoXCIucG9wdXAtb3ZlcmxheS11cGQtdHJpcCwgLnBvcHVwLWNvbnRlbnQtdXBkLXRyaXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkKFwiLmJveC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuICB9KTtcclxufVxyXG4vLy1FbmQgQmxvY2stLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vL0hhbmRsZSBvbiBzZWxlY3RlZCB0cmlwIGV2ZW50IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmZ1bmN0aW9uIGhhbmRsZVNlbGVjdFRyaXAoKSB7XHJcbiAgdmFyIHByZXZFbGVtZW50O1xyXG4gICQoJ21haW4nKS5vbignY2xpY2snLCAnLnRyaXAtdGl0bGUnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIGVsZW1lbnQgPSAkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qcy10cmlwLWl0ZW1cIik7XHJcbiAgICBzZWxlY3RlZElkID0gZWxlbWVudC5hdHRyKFwiaWRcIik7XHJcbiAgICBzaG93UGxhY2VzKHNlbGVjdGVkSWQpO1xyXG4gICAgaWYgKCFwcmV2RWxlbWVudCkge1xyXG4gICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSAkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qcy10cmlwLWl0ZW1cIik7XHJcbiAgICAgIGxvY2F0aW9uID0gY3VycmVudEVsZW1lbnQuZmluZChcIi5qcy10cmlwLWl0ZW0tbG9jYXRpb25cIikudGV4dCgpO1xyXG4gICAgICBjdXJyZW50RWxlbWVudC5maW5kKFwiLnRyaXAtY29udHJvbHNcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgIHJlbmRlclNlbGVjdGVkTWFwKGxvY2F0aW9uKTtcclxuICAgICAgcHJldkVsZW1lbnQgPSBjdXJyZW50RWxlbWVudDtcclxuICAgIH0gZWxzZSBpZiAocHJldkVsZW1lbnQgIT09IGN1cnJlbnRFbGVtZW50KSB7XHJcbiAgICAgIHByZXZFbGVtZW50LmZpbmQoXCIudHJpcC1jb250cm9sc1wiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgdmFyIGN1cnJlbnRFbGVtZW50ID0gJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanMtdHJpcC1pdGVtXCIpO1xyXG4gICAgICBsb2NhdGlvbiA9IGN1cnJlbnRFbGVtZW50LmZpbmQoXCIuanMtdHJpcC1pdGVtLWxvY2F0aW9uXCIpLnRleHQoKTtcclxuICAgICAgY3VycmVudEVsZW1lbnQuZmluZChcIi50cmlwLWNvbnRyb2xzXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cclxuICAgICAgcmVuZGVyU2VsZWN0ZWRNYXAobG9jYXRpb24pO1xyXG4gICAgICBwcmV2RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50O1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJTZWxlY3RlZE1hcChsb2NhdGlvbil7XHJcbiAgYXhpb3MuZ2V0KCdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uJywge1xyXG4gICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgIGFkZHJlc3M6IGxvY2F0aW9uLFxyXG4gICAgICAgICAgICBrZXk6ICdBSXphU3lCcHZqdDV6QnEyM1d1NmVaSHZWdUFIRWp4ZDFHZ0RiTWcnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihcclxuICAgICAgICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBnZW9jb2RlQWRkcmVzcyhyZXNwb25zZSk7XHJcblxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbi8vLUVuZCBCbG9jay0vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblxyXG4vL0Z1bmN0aW9ucyBjb252ZXJ0aW5nIGFuZCBzYXZpbmcgdHJpcCBkYXRlcyB3aXRoIE1vbmdvREIvLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0RGF0ZUludG9Nb25nb0RCKG1vbmdvRm9ybWF0RGF0ZSkge1xyXG4gIHZhciBhcnJheSA9IG1vbmdvRm9ybWF0RGF0ZS5zcGxpdCgnLScpO1xyXG4gIHZhciBzdGFydERhdGUgPSBuZXcgRGF0ZShhcnJheVswXSk7XHJcbiAgdmFyIGVuZERhdGUgPSBuZXcgRGF0ZShhcnJheVsxXSk7XHJcbiAgdmFyIHRyaXBEYXRlcyA9IHtcclxuICAgIHN0YXJ0RGF0ZToge1xyXG4gICAgICB0eXBlOiBEYXRlLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgfSxcclxuICAgIGVuZERhdGU6IHtcclxuICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgIH1cclxuICB9XHJcbiAgdHJpcERhdGVzLnN0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcclxuICB0cmlwRGF0ZXMuZW5kRGF0ZSA9IGVuZERhdGU7XHJcbiAgcmV0dXJuIHRyaXBEYXRlcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnREYXRlRnJvbU1vbmdvREIobW9uZ29Gb3JtYXREYXRlKSB7XHJcbiAgdmFyIGFycmF5ID0gbW9uZ29Gb3JtYXREYXRlLnNwbGl0KCcvJyk7XHJcbiAgdmFyIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGFycmF5WzBdKTtcclxuICB2YXIgZW5kRGF0ZSA9IG5ldyBEYXRlKGFycmF5WzFdKTtcclxuICB2YXIgY29udmVydGVkU3RhcnREYXRlID0gYCR7c3RhcnREYXRlLmdldE1vbnRoKCkrMX0vJHtzdGFydERhdGUuZ2V0RGF0ZSgpfS8ke3N0YXJ0RGF0ZS5nZXRGdWxsWWVhcigpfWBcclxuICB2YXIgY29udmVydGVkRW5kRGF0ZSA9IGAke2VuZERhdGUuZ2V0TW9udGgoKSsxfS8ke2VuZERhdGUuZ2V0RGF0ZSgpfS8ke2VuZERhdGUuZ2V0RnVsbFllYXIoKX1gXHJcbiAgdmFyIGNvbnZlcnRlZEZ1bGxEYXRlID0gYCR7Y29udmVydGVkU3RhcnREYXRlfSAtICR7Y29udmVydGVkRW5kRGF0ZX1gO1xyXG4gIHJldHVybiBjb252ZXJ0ZWRGdWxsRGF0ZTtcclxufVxyXG4vLy1FbmQgQmxvY2stLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vL0Z1bmN0aW9uIGZvciBzaG93IHVwIG1hcmtlcnMocGxhY2VzIG9uIEdvb2dsZSBNYXBzKS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93UGxhY2VzKHNlbGVjdGVkSWQpe1xyXG4gICQuZ2V0SlNPTihUUklQX0xJU1RfVVJMLCBmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgIHZhciBpdGVtID0gaXRlbXMuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IHNlbGVjdGVkSWQpO1xyXG4gICAgICBmb3IobGV0IGk9MDsgaTxpdGVtLnBsYWNlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgZGlzcGxheVBsYWNlT25NYXAoaXRlbS5wbGFjZXNbaV0pO1xyXG4gICAgICB9XHJcbiAgfSk7XHJcbn1cclxuLy8tRW5kIEJsb2NrLS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxud2luZG93LmluaXRNYXAgPSBpbml0TWFwO1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgZ2V0QW5kRGlzcGxheVRyaXBMaXN0KCk7XHJcbiAgaGFuZGxlVHJpcERlbGV0ZSgpO1xyXG4gIGhhbmRsZVNlbGVjdFRyaXAoKTtcclxuICBoYW5kbGVUcmlwTGlzdEFkZCgpO1xyXG4gIGhhbmRsZVRyaXBFZGl0KCk7XHJcbiAgaGFuZGxlQWRkUGxhY2UoKTtcclxuICBoYWRsZVZpZXdUcmlwKCk7XHJcbiAgaGFuZGxlQ2xvc2VGdWxsVmlldygpO1xyXG4gIGhhbmRsZUNsb3NlRWRpdFZpZXcoKTtcclxuICBoYW5kbGVDbG9zZUFkZFBsYWNlVmlldygpO1xyXG4gIGhhbmRsZVNhdmVOZXdQbGFjZSgpO1xyXG4gIGhhbmRsZVNraXBBZGRQbGFjZUZvcm0oKTtcclxuICBoYW5kbGVBZGRPbmVNb3JlUGxhY2UoKTtcclxuICBoYW5kbGVDYW5jZWxBZGRPbmVNb3JlUGxhY2UoKTtcclxuICBoYW5kbGVDb250ZW50RWRpdCgpO1xyXG4gIGhhbmRsZUNsb3NlTmV3VHJpcEZvcm0oKTtcclxufSkiLCJcclxuXHJcbmNvbnN0IHsgc2VydmVyQmFzZSB9ID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XHJcbnZhciBUUklQX0xJU1RfVVJMID0gc2VydmVyQmFzZSArICd0cmlwLWxpc3QnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRNYXAoKSB7XHJcbiAgdmFyIGxhc3RJdGVtO1xyXG4gICQuZ2V0SlNPTihUUklQX0xJU1RfVVJMLCBmdW5jdGlvbiAoaXRlbXMpIHtcclxuXHJcbiAgICBsYXN0SXRlbSA9IGl0ZW1zWzBdO1xyXG4gICAgY29uc29sZS5sb2cobGFzdEl0ZW0ubG9jYXRpb24pO1xyXG4gIH0pLnRoZW4oKGxhc3RJdGVtKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhsYXN0SXRlbVswXS5sb2NhdGlvbik7XHJcbiAgICBheGlvcy5nZXQoJ2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24nLCB7XHJcbiAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICBhZGRyZXNzOiBsYXN0SXRlbVswXS5sb2NhdGlvbixcclxuICAgICAgICAgIGtleTogJ0FJemFTeUJwdmp0NXpCcTIzV3U2ZVpIdlZ1QUhFanhkMUdnRGJNZydcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKFxyXG4gICAgICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgZ2VvY29kZUFkZHJlc3MocmVzcG9uc2UpXHJcbiAgICAgICAgfSlcclxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHZhciBtYXA7XHJcbmV4cG9ydCBmdW5jdGlvbiBnZW9jb2RlQWRkcmVzcyhyZXNwb25zZSkge1xyXG5cclxuICAvLyBMb2cgZnVsbCByZXNwb25zZVxyXG4gIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuXHJcbiAgLy8gRm9ybWF0dGVkIEFkZHJlc3NcclxuICB2YXIgZm9ybWF0dGVkQWRkcmVzcyA9IHJlc3BvbnNlLmRhdGEucmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcztcclxuXHJcbiAgLy8gR2VvbWV0cnlcclxuICB2YXIgbGF0ID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdDtcclxuICB2YXIgbG5nID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxuZztcclxuXHJcbiAgY29uc29sZS5sb2cobGF0KTtcclxuICBjb25zb2xlLmxvZyhsbmcpO1xyXG4gIGNvbnNvbGUubG9nKGZvcm1hdHRlZEFkZHJlc3MpO1xyXG4gIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICBjZW50ZXI6IHtcclxuICAgICAgbGF0OiBOdW1iZXIobGF0KSxcclxuICAgICAgbG5nOiBOdW1iZXIobG5nKVxyXG4gICAgfSxcclxuICAgIHpvb206IDEyXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29yZHNPZlBsYWNlKHBsYWNlKSB7XHJcbiAgcmV0dXJuIGF4aW9zLmdldCgnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbicsIHtcclxuICAgIHBhcmFtczoge1xyXG4gICAgICBhZGRyZXNzOiBwbGFjZSxcclxuICAgICAga2V5OiAnQUl6YVN5QnB2anQ1ekJxMjNXdTZlWkh2VnVBSEVqeGQxR2dEYk1nJ1xyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UGxhY2VPbk1hcChpdGVtUGxhY2UpIHtcclxuXHJcbiAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgcG9zaXRpb246IHtcclxuICAgICAgbGF0OiBOdW1iZXIoaXRlbVBsYWNlLmxhdCksXHJcbiAgICAgIGxuZzogTnVtYmVyKGl0ZW1QbGFjZS5sbmcpXHJcbiAgICB9LFxyXG4gICAgbWFwOiBtYXAsXHJcbiAgICBpY29uOiAnaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvZXhhbXBsZXMvZnVsbC9pbWFnZXMvYmVhY2hmbGFnLnBuZydcclxuICB9KTtcclxufSIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iXSwic291cmNlUm9vdCI6IiJ9